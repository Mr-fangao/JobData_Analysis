{"remainingRequest":"E:\\00 毕业设计\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\babel-loader\\lib\\index.js!E:\\00 毕业设计\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\00 毕业设计\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\src\\map\\api\\register.js","dependencies":[{"path":"E:\\00 毕业设计\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\src\\map\\api\\register.js","mtime":1563098587000},{"path":"E:\\00 毕业设计\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580901136398},{"path":"E:\\00 毕业设计\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\00 毕业设计\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _classCallCheck from \"E:\\\\00 \\u6BD5\\u4E1A\\u8BBE\\u8BA1\\\\04 \\u7CFB\\u7EDF\\u4EE3\\u7801\\\\C30 \\u5F00\\u53D1\\u6E90\\u4EE3\\u7801\\\\\\u524D\\u7AEF\\\\jobData_Analysis\\u524D\\u7AEF\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/classCallCheck\";\nimport _createClass from \"E:\\\\00 \\u6BD5\\u4E1A\\u8BBE\\u8BA1\\\\04 \\u7CFB\\u7EDF\\u4EE3\\u7801\\\\C30 \\u5F00\\u53D1\\u6E90\\u4EE3\\u7801\\\\\\u524D\\u7AEF\\\\jobData_Analysis\\u524D\\u7AEF\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/createClass\";\nimport gDrawGraphic from \"./js/GDrawGraphic\";\nimport GDrawSketch from \"./4+/GDrawSketch\";\n\nvar Register =\n/*#__PURE__*/\nfunction () {\n  function Register(mapView) {\n    var _this = this;\n\n    _classCallCheck(this, Register);\n\n    this.mapView = mapView;\n    this.gDraw = null; //绘制工具\n\n    new GDrawSketch(mapView).then(function (gDraw) {\n      _this.gDraw = gDraw;\n\n      _this.gDraw.on(\"draw-complete\", function (e) {\n        parent.onemap.pubsub.publish(\"draw-complete\", e);\n      });\n    });\n  }\n\n  _createClass(Register, [{\n    key: \"mapEvent\",\n    value: function mapEvent() {\n      var _this2 = this;\n\n      this.mapView.on(\"click\", function (e) {\n        e.stopPropagation();\n\n        _this2.mapView.hitTest(e).then(function (rsp) {\n          if (rsp.results.length === 0) {\n            return false;\n          }\n\n          var graphic = rsp.results[0].graphic;\n\n          if (graphic) {\n            var attributes = graphic.attributes;\n\n            if (attributes && attributes.popup === true) {\n              mapApi.popup.show({\n                mapView: _this2.mapView,\n                res: attributes.attr,\n                centerPt: attributes.centerPt\n              });\n            }\n          }\n        });\n      });\n      return this;\n    }\n  }, {\n    key: \"mapEventfore\",\n    value: function mapEventfore() {\n      var _this3 = this;\n\n      debugger;\n      this.mapView.on(\"click\", function (e) {\n        e.stopPropagation();\n\n        _this3.mapView.hitTest(e).then(function (rsp) {\n          if (rsp.results[0].graphic.attributes.attr.name1 === 0) {\n            return false;\n          }\n\n          var graphic = rsp.results[0].graphic;\n\n          if (graphic) {\n            var attributes = graphic.attributes;\n\n            if (attributes && attributes.popup === true) {\n              mapApi.forePoup.show({\n                mapView: _this3.mapView,\n                res: attributes.attr,\n                centerPt: attributes.centerPt\n              });\n            }\n          }\n        });\n      });\n      return this;\n    }\n  }, {\n    key: \"mapAPI\",\n    value: function mapAPI() {\n      var _this4 = this;\n\n      onemap.pubsub.subscribe(\"drawMarkerByList\", function (arg) {\n        arg.mapView = _this4.mapView;\n        gDrawGraphic.markersByList(arg);\n      });\n      onemap.pubsub.subscribe(\"drawHouseByList\", function (arg) {\n        arg.mapView = _this4.mapView;\n        gDrawGraphic.housesByList(arg);\n      }); // 绘制小气泡列表\n\n      onemap.pubsub.subscribe(\"drawforeHouseWKT\", function (arg) {\n        arg.mapView = _this4.mapView;\n        gDrawGraphic.housesGWRByList(arg);\n      }); // 绘制小气泡列表\n\n      onemap.pubsub.subscribe(\"drawHouseGWRByList\", function (arg) {\n        arg.mapView = _this4.mapView;\n        gDrawGraphic.daishouHouse(arg);\n      }); // 绘制小气泡列表\n\n      onemap.pubsub.subscribe(\"drawPolygonByList\", function (arg) {\n        arg.mapView = _this4.mapView; // 绘制面\n\n        gDrawGraphic.polygonsByList(arg);\n      }); // 绘制面状列表\n\n      return this;\n    }\n  }, {\n    key: \"parentMapAPI\",\n    value: function parentMapAPI() {\n      var _this5 = this;\n\n      if (parent.onemap) {\n        parent.onemap.pubsub.subscribe(\"clear\", function (arg) {\n          onemap.pubsub.publish(\"clear\");\n        });\n        parent.onemap.pubsub.subscribe(\"drawMarkerByList\", function (arg) {\n          arg.mapView = _this5.mapView;\n          gDrawGraphic.markersByList(arg);\n        }); // 绘制小气泡列表\n\n        parent.onemap.pubsub.subscribe(\"drawPolygonByList\", function (arg) {\n          arg.mapView = _this5.mapView; // 绘制面\n\n          gDrawGraphic.polygonsByList(arg);\n        }); // 绘制面状列表\n\n        parent.onemap.pubsub.subscribe(\"drawPolygonByGeoJson\", function (arg) {\n          arg.mapView = _this5.mapView; // 绘制面\n\n          gDrawGraphic.polygonsByGeoJson(arg);\n        }); // 绘制面状列表\n\n        parent.onemap.pubsub.subscribe(\"location\", function (arg) {\n          _this5.mapView.graphics.forEach(function (g) {\n            if (g.attributes.popup === true && g.attributes.attr.pIndex === arg.pIndex) {\n              mapApi.popup.show({\n                mapView: _this5.mapView,\n                res: g.attributes.attr,\n                centerPt: g.attributes.centerPt,\n                pan: true\n              });\n              return false;\n            }\n          });\n        }); //根据list定位\n\n        parent.onemap.pubsub.subscribe(\"draw\", function (arg) {\n          var type = arg.type || \"polygon\";\n          var layer = arg.layer || null;\n\n          _this5.gDraw.create(type, layer);\n        }); //图形绘制\n\n        return this;\n      }\n    }\n  }]);\n\n  return Register;\n}();\n\nexport { Register as default };",{"version":3,"sources":["E:\\00 毕业设计\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\src\\map\\api\\register.js"],"names":["gDrawGraphic","GDrawSketch","Register","mapView","gDraw","then","on","parent","onemap","pubsub","publish","e","stopPropagation","hitTest","rsp","results","length","graphic","attributes","popup","mapApi","show","res","attr","centerPt","name1","forePoup","subscribe","arg","markersByList","housesByList","housesGWRByList","daishouHouse","polygonsByList","polygonsByGeoJson","graphics","forEach","g","pIndex","pan","type","layer","create"],"mappings":"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","sourcesContent":["import gDrawGraphic from \"./js/GDrawGraphic\";\nimport GDrawSketch from \"./4+/GDrawSketch\"\nexport default class Register {\n  constructor(mapView) {\n    this.mapView = mapView;\n    this.gDraw = null; //绘制工具\n    new GDrawSketch(mapView).then(gDraw => {\n      this.gDraw = gDraw;\n      this.gDraw.on(\"draw-complete\", e => {\n        parent.onemap.pubsub.publish(\"draw-complete\", e);\n      });\n    });\n  }\n\n  mapEvent() {\n    this.mapView.on(\"click\", e => {\n      e.stopPropagation();\n      this.mapView.hitTest(e).then(rsp => {\n        if (rsp.results.length === 0) {\n          return false;\n        }\n        let graphic = rsp.results[0].graphic;\n        if (graphic) {\n          var attributes = graphic.attributes;\n          if (attributes && attributes.popup === true) {\n            mapApi.popup.show({\n              mapView: this.mapView,\n              res: attributes.attr,\n              centerPt: attributes.centerPt\n            });\n          }\n        }\n      });\n    });\n    return this;\n  }\n\n  mapEventfore() {\n    debugger;\n    this.mapView.on(\"click\", e => {\n      e.stopPropagation();\n      this.mapView.hitTest(e).then(rsp => {\n        if (rsp.results[0].graphic.attributes.attr.name1 === 0) {\n          return false;\n        }\n        let graphic = rsp.results[0].graphic;\n        if (graphic) {\n          var attributes = graphic.attributes;\n          if (attributes && attributes.popup === true) {\n            mapApi.forePoup.show({\n              mapView: this.mapView,\n              res: attributes.attr,\n              centerPt: attributes.centerPt\n            });\n          }\n        }\n      });\n    });\n    return this;\n  }\n\n  mapAPI() {\n\n    onemap.pubsub.subscribe(\"drawMarkerByList\", arg => {\n      arg.mapView = this.mapView;\n      gDrawGraphic.markersByList(arg);\n    });\n    onemap.pubsub.subscribe(\"drawHouseByList\", arg => {\n\n      arg.mapView = this.mapView;\n      gDrawGraphic.housesByList(arg);\n    }); // 绘制小气泡列表\n    onemap.pubsub.subscribe(\"drawforeHouseWKT\", arg => {\n      arg.mapView = this.mapView;\n      gDrawGraphic.housesGWRByList(arg);\n    }); // 绘制小气泡列表\n    onemap.pubsub.subscribe(\"drawHouseGWRByList\", arg => {\n      arg.mapView = this.mapView;\n      gDrawGraphic.daishouHouse(arg);\n    }); // 绘制小气泡列表\n    onemap.pubsub.subscribe(\"drawPolygonByList\", arg => {\n      arg.mapView = this.mapView;\n      // 绘制面\n      gDrawGraphic.polygonsByList(arg);\n    }); // 绘制面状列表\n    return this;\n  }\n\n  parentMapAPI() {\n    if (parent.onemap) {\n      parent.onemap.pubsub.subscribe(\"clear\", arg => {\n        onemap.pubsub.publish(\"clear\");\n      });\n      parent.onemap.pubsub.subscribe(\"drawMarkerByList\", arg => {\n        arg.mapView = this.mapView;\n        gDrawGraphic.markersByList(arg);\n      }); // 绘制小气泡列表\n      parent.onemap.pubsub.subscribe(\"drawPolygonByList\", arg => {\n        arg.mapView = this.mapView;\n        // 绘制面\n        gDrawGraphic.polygonsByList(arg);\n      }); // 绘制面状列表\n      parent.onemap.pubsub.subscribe(\"drawPolygonByGeoJson\", arg => {\n        arg.mapView = this.mapView;\n        // 绘制面\n        gDrawGraphic.polygonsByGeoJson(arg);\n      }); // 绘制面状列表\n      parent.onemap.pubsub.subscribe(\"location\", arg => {\n        this.mapView.graphics.forEach(g => {\n          if (g.attributes.popup === true && g.attributes.attr.pIndex === arg.pIndex) {\n            mapApi.popup.show({\n              mapView: this.mapView,\n              res: g.attributes.attr,\n              centerPt: g.attributes.centerPt,\n              pan: true\n            });\n            return false;\n          }\n        });\n      }); //根据list定位\n      parent.onemap.pubsub.subscribe(\"draw\", arg => {\n        var type = arg.type || \"polygon\";\n        var layer = arg.layer || null;\n        this.gDraw.create(type, layer);\n      }); //图形绘制\n      return this;\n    }\n  }\n}"]}]}