{"remainingRequest":"D:\\graduate\\node_modules\\babel-loader\\lib\\index.js!D:\\graduate\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduate\\src\\views\\recommendation\\periphery\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\graduate\\src\\views\\recommendation\\periphery\\index.vue","mtime":1580899747540},{"path":"D:\\graduate\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580901136398},{"path":"D:\\graduate\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\graduate\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SiderMenu from \"@/views/main/siderMenu\";\nimport routerView from \"@/map/components/routerView\";\nimport Server from \"@/core/server\";\nimport { MapAPI } from \"@/core/config/const\";\nimport { services } from \"@/core/config/services\";\nimport Item from \"./components/item\";\nimport aroundInfo from \"@/vuex/store\";\nimport housueName from \"@/vuex/store\";\nimport companyName from \"@/vuex/store\";\nexport default {\n  mounted: function mounted() {\n    var _this2 = this;\n\n    setTimeout(function () {\n      _this2.getdata();\n    }, 600);\n  },\n  data: function data() {\n    return {\n      distance: \"1000\",\n      map: true,\n      timeIndex: 0,\n      pageSize: 10,\n      listName: \"公交\",\n      listData: [],\n      list: [],\n      total: \"\",\n      housueName: \"\",\n      isPopup: true,\n      isPan: true,\n      orderList: [{\n        name: \"公交\",\n        type: \"BUSSTATION \"\n      }, {\n        name: \"车站\"\n      }, {\n        name: \"医疗设施\",\n        type: \"MEDICALDATA \"\n      }, {\n        name: \"学校\",\n        type: \"SCHOOLDATA \"\n      }, {\n        name: \"休闲娱乐\",\n        type: \"ENTERTAINMENT \"\n      }, {\n        name: \"公园\",\n        type: \"PARKDATA \"\n      }]\n    };\n  },\n  watch: {\n    data: function data() {\n      this.onPageChange(1);\n    }\n  },\n  methods: {\n    onItemClick: function onItemClick(data) {\n      for (var i = 0, g; g = window.mapview.graphics.items[i]; i++) {\n        if (g.attributes.id === data.pIndex) {\n          var geometry = null;\n\n          if (g.geometry.type === \"point\") {\n            geometry = g.geometry;\n          } else {\n            var extent = g.geometry.extent.clone();\n            geometry = extent.expand(2);\n          }\n\n          window.mapview.goTo(geometry);\n          var attributes = g.attributes;\n          mapApi.popup.show({\n            mapView: window.mapview,\n            res: attributes.attr,\n            centerPt: attributes.centerPt\n          });\n          break;\n        }\n      }\n\n      this.$refs.routerView.addStop(data);\n    },\n    getdata: function getdata() {\n      debugger;\n      this.houseName = housueName.state.housueName;\n      this.list = aroundInfo.state.list;\n      this.total = aroundInfo.state.length;\n      this.onPageChange(1); // for (\n      //   var i = 0, len = this.total, item;\n      //   i < len, (item = this.listData[i]);\n      //   i++\n      // ) {\n      //   if (i < this.total) {\n      //     item.pIndex = \"p\" + i;\n      //     this.listData.push(item);\n      //   } else {\n      //     break;\n      //   }\n      // }\n    },\n    selectTimer: function selectTimer(index, value) {\n      var _this3 = this;\n\n      debugger;\n      this.timeIndex = index;\n      this.listName = value.name;\n      companyName.commit(\"companyName\", this.listName);\n      this.houseName = housueName.state.housueName;\n      console.log(this.houseName);\n      Server.get({\n        url: services.road,\n        params: {\n          name: this.houseName,\n          tableName: value.type,\n          distance: this.distance\n        }\n      }).then(function (rsp) {\n        var _this = _this3;\n\n        if (rsp.status === 1) {\n          _this.list = rsp.data;\n          _this.total = rsp.length;\n\n          _this.onPageChange(1);\n        }\n      });\n    },\n    onPageChange: function onPageChange(page) {\n      debugger;\n      var data = [];\n\n      for (var i = (page - 1) * this.pageSize, len = this.total, item; i < len, item = this.list[i]; i++) {\n        if (i < page * this.pageSize) {\n          item.pIndex = \"p\" + i;\n          data.push(item);\n        } else {\n          break;\n        }\n      }\n\n      this.listData = data;\n      this.showGraphics();\n    },\n    showGraphics: function showGraphics() {\n      window.mapview.graphics.removeAll();\n      if (this.list === 0) return;\n      onemap.pubsub.publish(\"drawMarkerByList\", {\n        list: this.listData\n      });\n    }\n  },\n  components: {\n    Item: Item,\n    routerView: routerView,\n    SiderMenu: SiderMenu\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["  <template>\r\n  <Layout :style=\"{height:'100%'}\">\r\n    <Sider ref=\"side1\" :width='180'>\r\n      <sider-menu/>>\r\n    </Sider>\r\n    <Content>\r\n      <Header :style=\"{padding: 0}\" class=\"layout-header-bar\">\r\n        <Breadcrumb>\r\n          <Icon :class=\"rotateIcon\" :style=\"{margin: '0 5px'}\" type=\"md-menu\" size=\"25\"></Icon>\r\n          <BreadcrumbItem v-for=\"(item,idx) in $route.matched\" :key=\"idx\" :to=\"(item.path)\">{{item.name}}</BreadcrumbItem>\r\n        </Breadcrumb>\r\n      </Header>\r\n      <div class=\"around\">\r\n        <div class=\"title\">\r\n          <p>{{houseName}}</p>\r\n        </div>\r\n        <ul>\r\n          <li v-for=\"(value,index) in orderList\" :key=\"index\" @click=\"selectTimer(index,value)\" :class=\"timeIndex === index ? 'default-active' : 'default' \">{{ value.name }}</li>\r\n        </ul>\r\n        <Row>\r\n          <Col span=\"17\">\r\n          <div class=\"map\" style=\"height: 605px;width: 100%;\">\r\n            <routerView ref=\"routerView\" v-if=\"map\"></routerView>\r\n          </div>\r\n          </Col>\r\n          <Col span=\"7\">\r\n          <div class=\"list\">\r\n            <div class=\"name\">{{listName}}</div>\r\n            <div class=\"ul-box\">\r\n              <div class=\"around-no-info\">\r\n                <ul>\r\n                  <item v-for=\"(item,id) in listData\" :key=\"item.id\" :data=\"item\" :id=\"id+1\" @on-item-click=\"onItemClick\" />\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            <div class=\"page-footer\" v-show=\"list.length>10\">\r\n              <Page :total=\"list.length\" :page-size=\"pageSize\" size=\"small\" @on-change=\"onPageChange\"></Page>\r\n            </div>\r\n          </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </Content>\r\n  </Layout>\r\n\r\n</template>\r\n<script>\r\nimport SiderMenu from \"@/views/main/siderMenu\";\r\nimport routerView from \"@/map/components/routerView\";\r\nimport Server from \"@/core/server\";\r\nimport { MapAPI } from \"@/core/config/const\";\r\nimport { services } from \"@/core/config/services\";\r\nimport Item from \"./components/item\";\r\nimport aroundInfo from \"@/vuex/store\";\r\nimport housueName from \"@/vuex/store\";\r\nimport companyName from \"@/vuex/store\";\r\nexport default {\r\n  mounted() {\r\n    setTimeout(() => {\r\n      this.getdata();\r\n    }, 600);\r\n  },\r\n  data() {\r\n    return {\r\n      distance: \"1000\",\r\n      map: true,\r\n      timeIndex: 0,\r\n      pageSize: 10,\r\n      listName: \"公交\",\r\n      listData: [],\r\n      list: [],\r\n      total: \"\",\r\n      housueName: \"\",\r\n      isPopup: true,\r\n      isPan: true,\r\n      orderList: [\r\n        { name: \"公交\", type: \"BUSSTATION \" },\r\n        { name: \"车站\" },\r\n        { name: \"医疗设施\", type: \"MEDICALDATA \" },\r\n        { name: \"学校\", type: \"SCHOOLDATA \" },\r\n        { name: \"休闲娱乐\", type: \"ENTERTAINMENT \" },\r\n        { name: \"公园\", type: \"PARKDATA \" }\r\n      ]\r\n    };\r\n  },\r\n  watch: {\r\n    data() {\r\n      this.onPageChange(1);\r\n    }\r\n  },\r\n  methods: {\r\n    onItemClick(data) {\r\n      for (var i = 0, g; (g = window.mapview.graphics.items[i]); i++) {\r\n        if (g.attributes.id === data.pIndex) {\r\n          var geometry = null;\r\n          if (g.geometry.type === \"point\") {\r\n            geometry = g.geometry;\r\n          } else {\r\n            var extent = g.geometry.extent.clone();\r\n            geometry = extent.expand(2);\r\n          }\r\n          window.mapview.goTo(geometry);\r\n          var attributes = g.attributes;\r\n          mapApi.popup.show({\r\n            mapView: window.mapview,\r\n            res: attributes.attr,\r\n            centerPt: attributes.centerPt\r\n          });\r\n          break;\r\n        }\r\n      }\r\n      this.$refs.routerView.addStop(data);\r\n    },\r\n    getdata() {\r\n      debugger;\r\n      this.houseName = housueName.state.housueName;\r\n      this.list = aroundInfo.state.list;\r\n      this.total = aroundInfo.state.length;\r\n      this.onPageChange(1);\r\n      // for (\r\n      //   var i = 0, len = this.total, item;\r\n      //   i < len, (item = this.listData[i]);\r\n      //   i++\r\n      // ) {\r\n      //   if (i < this.total) {\r\n      //     item.pIndex = \"p\" + i;\r\n      //     this.listData.push(item);\r\n      //   } else {\r\n      //     break;\r\n      //   }\r\n      // }\r\n    },\r\n    selectTimer(index, value) {\r\n      debugger;\r\n      this.timeIndex = index;\r\n      this.listName = value.name;\r\n      companyName.commit(\"companyName\", this.listName);\r\n      this.houseName = housueName.state.housueName;\r\n      console.log(this.houseName);\r\n      Server.get({\r\n        url: services.road,\r\n        params: {\r\n          name: this.houseName,\r\n          tableName: value.type,\r\n          distance: this.distance\r\n        }\r\n      }).then(rsp => {\r\n        var _this = this;\r\n        if (rsp.status === 1) {\r\n          _this.list = rsp.data;\r\n          _this.total = rsp.length;\r\n          _this.onPageChange(1);\r\n        }\r\n      });\r\n    },\r\n    onPageChange(page) {\r\n      debugger;\r\n      let data = [];\r\n      for (\r\n        var i = (page - 1) * this.pageSize, len = this.total, item;\r\n        i < len, (item = this.list[i]);\r\n        i++\r\n      ) {\r\n        if (i < page * this.pageSize) {\r\n          item.pIndex = \"p\" + i;\r\n          data.push(item);\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      this.listData = data;\r\n      this.showGraphics();\r\n    },\r\n    showGraphics() {\r\n      window.mapview.graphics.removeAll();\r\n      if (this.list === 0) return;\r\n      onemap.pubsub.publish(\"drawMarkerByList\", {\r\n        list: this.listData\r\n      });\r\n    }\r\n  },\r\n  components: {\r\n    Item,\r\n    routerView,\r\n    SiderMenu\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.layout-header-bar {\r\n  background: #fff;\r\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\r\n}\r\n.around {\r\n  height: 700px;\r\n  width: 1300px;\r\n  margin: 0 auto;\r\n  .title {\r\n    font-size: 22px;\r\n    margin-top: 10px;\r\n    margin-bottom: 5px;\r\n    font-weight: 600;\r\n    color: #101d37;\r\n  }\r\n  ul {\r\n    margin-left: -8px;\r\n    .select:after {\r\n      content: \"\";\r\n      position: absolute;\r\n      bottom: -4px;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 2px;\r\n      background: #19be6b;\r\n    }\r\n    li {\r\n      cursor: pointer;\r\n      display: inline-block;\r\n      line-height: 28px;\r\n      padding: 0 9px;\r\n      margin-bottom: 5px;\r\n      color: #555;\r\n      font-size: 14px;\r\n    }\r\n    .default-active {\r\n      color: #19be6b;\r\n      // background: #f00;\r\n    }\r\n    li:hover {\r\n      color: #19be6b;\r\n    }\r\n  }\r\n}\r\n\r\n.around .list {\r\n  //   width: 310px;\r\n  height: 605px;\r\n  background-color: #fff;\r\n  box-shadow: 0 0 7px rgba(0, 0, 0, 0.45);\r\n  .name {\r\n    line-height: 39px;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    font-weight: 700;\r\n    color: #fff;\r\n    background: #19be6b !important;\r\n  }\r\n  .ul-box {\r\n    height: 540px;\r\n    overflow-y: scroll;\r\n  }\r\n}\r\n.page-footer {\r\n  margin-left: 10px;\r\n}\r\n</style>\r\n\r\n    "],"sourceRoot":"src\\views\\recommendation\\periphery"}]}