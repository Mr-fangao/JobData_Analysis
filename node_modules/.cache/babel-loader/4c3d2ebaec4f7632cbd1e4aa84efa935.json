{"remainingRequest":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\src\\views\\spaceRecommendation\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\src\\views\\spaceRecommendation\\index.vue","mtime":1588970980807},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580901136398},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport toolForm from \"@/views/infoSearch/inforCount/public.vue\";\nimport buffer from \"@/views/infoSearch/inforCount/buffer.vue\";\nimport siteSelection from \"./home/components/siteSelection\";\nimport { computeh } from \"@/core/computeh\";\nimport GDrawbuffer from \"@/map/api/4+/GDrawBuffer\";\nimport GConvertGeometry from \"@/map/api/js/convert/GConvertGeometry\";\nimport GDrawSketch from \"@/map/api/4+/GDrawSketch\";\nimport Server from \"@/core/server\";\nimport { services } from \"@/core/config/services\";\nimport houseInfoId from \"@/vuex/store\";\nimport dataRap from \"@/vuex/store\";\nimport aroundInfo from \"@/vuex/store\";\nimport housePoint from \"@/vuex/store\";\nexport default {\n  mixins: [computeh],\n  mounted: function mounted() {\n    var roleid = JSON.parse(sessionStorage.getItem(\"roleId\"));\n\n    if (roleid === \"R0001\" || roleid === \"R0002\") {\n      this.show = true;\n    } else {\n      this.show = false;\n    }\n  },\n  data: function data() {\n    return {\n      collect: require(\"../../assets/img/collect.png\"),\n      uncollect: require(\"../../assets/img/uncollect.png\"),\n      house: \"\",\n      isExtent: true,\n      show: true,\n      distance: \"\",\n      distance2: \"\",\n      isCollapsed: false,\n      path: \"10\",\n      site: false,\n      publicsheshi: \"\",\n      isPopup: true,\n      isPan: true,\n      houseTitle: \"\",\n      dialog3: false,\n      list: \"\",\n      pointY: \"\",\n      pointX: \"\"\n    };\n  },\n  computed: {},\n  methods: {\n    Collection: function Collection(index, value) {\n      var _this2 = this;\n\n      if (value.collected === 0) {\n        var userId = JSON.parse(sessionStorage.getItem(\"userId\"));\n        this.houseName = value.name;\n        this.houseId = value.houseId;\n        Server.get({\n          url: services.addCollectHouse,\n          params: {\n            userId: userId,\n            houseName: this.houseName\n          }\n        }).then(function (rsp) {\n          _this2.$Message.success(rsp.message);\n\n          value.collected = 1;\n        });\n      } else if (value.collected === 1) {\n        this.houseName = value.name;\n        var userId = JSON.parse(sessionStorage.getItem(\"userId\"));\n        this.$Modal.confirm({\n          title: \"提示\",\n          content: \"是否取消收藏?\",\n          onOk: function onOk() {\n            Server.get({\n              url: services.delCollectHouse,\n              params: {\n                userId: userId,\n                houseName: _this2.houseName\n              }\n            }).then(function (rsp) {\n              if (rsp.status == 1) {\n                _this2.$Message.success(rsp.message);\n\n                value.collected = 0;\n              } else {\n                _this2.$Message.error(rsp.message);\n              }\n            });\n          }\n        });\n      }\n    },\n    location: function location(index, value) {\n      for (var i = 0, g; g = window.mapview.graphics.items[i]; i++) {\n        var pIndex = \"p\" + index;\n\n        if (g.attributes.id === value.pIndex) {\n          var geometry = null;\n\n          if (g.geometry.type === \"point\") {\n            geometry = g.geometry;\n          } else {\n            var extent = g.geometry.extent.clone();\n            geometry = extent.expand(2);\n          }\n\n          window.mapview.goTo(geometry);\n          var attributes = g.attributes;\n          mapApi.popup.show({\n            mapView: window.mapview,\n            res: attributes.attr,\n            centerPt: attributes.centerPt\n          });\n          break;\n        }\n      }\n    },\n    getInfo: function getInfo(index, value) {\n      var _this3 = this;\n\n      debugger;\n      this.houseName = value.name;\n      this.houseId = value.houseId;\n      this.houseShape = value.Shape;\n      housePoint.commit(\"housePoint\", this.houseShape);\n      Server.get({\n        url: services.compareHouseDetails,\n        params: {\n          houseId: this.houseId\n        }\n      }).then(function (rsp) {\n        if (rsp.status === 1) {\n          houseInfoId.commit(\"houseInfoId\", rsp);\n        }\n      }).then(Server.get({\n        url: services.road,\n        params: {\n          name: value.name,\n          tableName: \"BUSSTATION\",\n          distance: this.distance\n        }\n      }).then(function (rsp) {\n        debugger;\n        var _this = _this3;\n\n        if (rsp.status === 1) {\n          aroundInfo.commit(\"aroundInfo\", rsp);\n          aroundInfo.commit(\"housueName\", _this3.houseName);\n\n          _this3.$router.push(\"/houseinfo\");\n        }\n      }));\n    },\n    getHouse: function getHouse() {\n      var _this4 = this;\n\n      debugger;\n      this.distance2 = this.distance * 1000;\n      var userId = JSON.parse(sessionStorage.getItem(\"userId\"));\n      Server.post({\n        url: services.getHouseSimilarity,\n        params: {\n          housePolygon: this.house,\n          distance: this.distance2,\n          userId: userId,\n          pointX: this.pointX,\n          pointY: this.pointY\n        }\n      }).then(function (rsp) {\n        if (rsp.status === 1) {\n          _this4.list = rsp.data.slice(0, 6);\n\n          _this4.showGraphics();\n\n          _this4.$Message.success(\"查询成功\");\n        } else {\n          _this4.$Message.error(rsp.message);\n        }\n      });\n    },\n    createPoint: function createPoint() {\n      var _this5 = this;\n\n      new GDrawbuffer(window.mapview).then(function (gDraw) {\n        _this5.gDraw = gDraw;\n\n        _this5.gDraw.enableCreatePoint(_this5.distance, function (buffer) {\n          _this5.house = window.mapApi.convert.toWKTByGeometry.ToWKT(buffer);\n          _this5.pointX = buffer.centroid.x;\n          _this5.pointY = buffer.centroid.y;\n          console.log(buffer.centroid.latitude);\n          console.log(buffer.centroid.longitude);\n          console.log(buffer.centroid.x);\n          console.log(buffer.centroid.y);\n        });\n      });\n    },\n    showGraphics: function showGraphics() {\n      if (this.list === 0) return;\n      onemap.pubsub.publish(\"drawHouseByList\", {\n        list: this.list,\n        popup: this.isPopup,\n        pan: this.isPan\n      });\n    }\n  },\n  components: {\n    toolForm: toolForm,\n    buffer: buffer,\n    siteSelection: siteSelection\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"layout\">\r\n    <Layout>\r\n      <Content>\r\n        <Header :style=\"{padding: 0}\" class=\"layout-header-bar\">\r\n          <Breadcrumb>\r\n            <Icon :style=\"{margin: '0 5px'}\" type=\"md-menu\" size=\"25\"></Icon>\r\n            <BreadcrumbItem\r\n              v-for=\"(item,idx) in $route.matched\"\r\n              :key=\"idx\"\r\n              :to=\"(item.path)\"\r\n            >{{item.name}}</BreadcrumbItem>\r\n          </Breadcrumb>\r\n        </Header>\r\n        <div class=\"info\">\r\n          <div v-for=\"(value,index) in list\" :key=\"index\">\r\n            <div @click=\"location(index,value)\" style=\"margin: 10px;border-bottom:1px solid #999\">\r\n              <Row>\r\n                <Col span=\"12\">\r\n                  <div class=\"left mend_img\">\r\n                    <img style=\"width: 150px;height: 100px\" v-bind:src=\"value.image\" />\r\n                  </div>\r\n                </Col>\r\n                <Col span=\"12\">\r\n                  <div class=\"left name\" style=\"margin-top: 5px\">\r\n                    <h3 style=\"display:inline-block;width:140px\">{{value.name}}</h3>\r\n                    <img\r\n                      v-if=\"value.collected == '0'\"\r\n                      :src=\"uncollect\"\r\n                      alt\r\n                      title=\"收藏\"\r\n                      @click=\"Collection(index,value)\"\r\n                      id=\"index\"\r\n                      style=\"width: 15px;height: 15px;\"\r\n                    />\r\n                    <img\r\n                      v-else-if=\"value.collected == '1'\"\r\n                      :src=\"collect\"\r\n                      alt\r\n                      title=\"取消收藏\"\r\n                      @click=\"Collection(index,value)\"\r\n                      style=\"width: 15px;height: 15px;\"\r\n                    />\r\n                    <p style=\"margin-top: 5px\">\r\n                      <span>相似度：</span>\r\n                      {{value.score}}\r\n                    </p>\r\n                    <div style=\"margin-top: 5px;color: red\">\r\n                      <span>均价：</span>\r\n                      {{value.price}}元\r\n                    </div>\r\n                    <a @click=\"getInfo(index,value)\" style=\"font-size: 10px\">查看小区周边详情>></a>\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"sidermenu\">\r\n          <Input v-model=\"distance\" placeholder=\"请输入空间约束：\" clearable style=\"width: 200px\" />\r\n          <Button shape=\"circle\" title=\"自定义选点\" @click=\"createPoint\">\r\n            <span>\r\n              <Icon type=\"ios-pin-outline\" size=\"17\" />\r\n            </span>\r\n          </Button>\r\n          <div>\r\n            <Button type=\"primary\" @click=\"getHouse\">确定</Button>\r\n          </div>\r\n        </div>\r\n        <router-view />\r\n      </Content>\r\n    </Layout>\r\n  </div>\r\n</template>\r\n<script>\r\nimport toolForm from \"@/views/infoSearch/inforCount/public.vue\";\r\nimport buffer from \"@/views/infoSearch/inforCount/buffer.vue\";\r\nimport siteSelection from \"./home/components/siteSelection\";\r\nimport { computeh } from \"@/core/computeh\";\r\nimport GDrawbuffer from \"@/map/api/4+/GDrawBuffer\";\r\nimport GConvertGeometry from \"@/map/api/js/convert/GConvertGeometry\";\r\nimport GDrawSketch from \"@/map/api/4+/GDrawSketch\";\r\nimport Server from \"@/core/server\";\r\nimport { services } from \"@/core/config/services\";\r\nimport houseInfoId from \"@/vuex/store\";\r\nimport dataRap from \"@/vuex/store\";\r\nimport aroundInfo from \"@/vuex/store\";\r\nimport housePoint from \"@/vuex/store\";\r\nexport default {\r\n  mixins: [computeh],\r\n  mounted() {\r\n    var roleid = JSON.parse(sessionStorage.getItem(\"roleId\"));\r\n    if (roleid === \"R0001\" || roleid === \"R0002\") {\r\n      this.show = true;\r\n    } else {\r\n      this.show = false;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      collect: require(`../../assets/img/collect.png`),\r\n      uncollect: require(`../../assets/img/uncollect.png`),\r\n      house: \"\",\r\n      isExtent: true,\r\n      show: true,\r\n      distance: \"\",\r\n      distance2: \"\",\r\n      isCollapsed: false,\r\n      path: \"10\",\r\n      site: false,\r\n      publicsheshi: \"\",\r\n      isPopup: true,\r\n      isPan: true,\r\n      houseTitle: \"\",\r\n      dialog3: false,\r\n      list: \"\",\r\n      pointY: \"\",\r\n      pointX: \"\"\r\n    };\r\n  },\r\n  computed: {},\r\n\r\n  methods: {\r\n    Collection(index, value) {\r\n      if (value.collected === 0) {\r\n        var userId = JSON.parse(sessionStorage.getItem(\"userId\"));\r\n        this.houseName = value.name;\r\n        this.houseId = value.houseId;\r\n        Server.get({\r\n          url: services.addCollectHouse,\r\n          params: {\r\n            userId: userId,\r\n            houseName: this.houseName\r\n          }\r\n        }).then(rsp => {\r\n          this.$Message.success(rsp.message);\r\n          value.collected = 1;\r\n        });\r\n      } else if (value.collected === 1) {\r\n        this.houseName = value.name;\r\n        var userId = JSON.parse(sessionStorage.getItem(\"userId\"));\r\n        this.$Modal.confirm({\r\n          title: \"提示\",\r\n          content: \"是否取消收藏?\",\r\n          onOk: () => {\r\n            Server.get({\r\n              url: services.delCollectHouse,\r\n              params: {\r\n                userId: userId,\r\n                houseName: this.houseName\r\n              }\r\n            }).then(rsp => {\r\n              if (rsp.status == 1) {\r\n                this.$Message.success(rsp.message);\r\n                value.collected = 0;\r\n              } else {\r\n                this.$Message.error(rsp.message);\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    location(index, value) {\r\n      for (var i = 0, g; (g = window.mapview.graphics.items[i]); i++) {\r\n        var pIndex = \"p\" + index;\r\n        if (g.attributes.id === value.pIndex) {\r\n          var geometry = null;\r\n          if (g.geometry.type === \"point\") {\r\n            geometry = g.geometry;\r\n          } else {\r\n            var extent = g.geometry.extent.clone();\r\n            geometry = extent.expand(2);\r\n          }\r\n          window.mapview.goTo(geometry);\r\n          var attributes = g.attributes;\r\n          mapApi.popup.show({\r\n            mapView: window.mapview,\r\n            res: attributes.attr,\r\n            centerPt: attributes.centerPt\r\n          });\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    getInfo(index, value) {\r\n      debugger;\r\n      this.houseName = value.name;\r\n      this.houseId = value.houseId;\r\n      this.houseShape = value.Shape;\r\n      housePoint.commit(\"housePoint\", this.houseShape);\r\n      Server.get({\r\n        url: services.compareHouseDetails,\r\n        params: {\r\n          houseId: this.houseId\r\n        }\r\n      })\r\n        .then(rsp => {\r\n          if (rsp.status === 1) {\r\n            houseInfoId.commit(\"houseInfoId\", rsp);\r\n          }\r\n        })\r\n        .then(\r\n          Server.get({\r\n            url: services.road,\r\n            params: {\r\n              name: value.name,\r\n              tableName: \"BUSSTATION\",\r\n              distance: this.distance\r\n            }\r\n          }).then(rsp => {\r\n            debugger;\r\n            var _this = this;\r\n            if (rsp.status === 1) {\r\n              aroundInfo.commit(\"aroundInfo\", rsp);\r\n              aroundInfo.commit(\"housueName\", this.houseName);\r\n              this.$router.push(\"/houseinfo\");\r\n            }\r\n          })\r\n        );\r\n    },\r\n    getHouse() {\r\n      debugger;\r\n      this.distance2 = this.distance * 1000;\r\n      var userId = JSON.parse(sessionStorage.getItem(\"userId\"));\r\n      Server.post({\r\n        url: services.getHouseSimilarity,\r\n        params: {\r\n          housePolygon: this.house,\r\n          distance: this.distance2,\r\n          userId: userId,\r\n          pointX: this.pointX,\r\n          pointY: this.pointY\r\n        }\r\n      }).then(rsp => {\r\n        if (rsp.status === 1) {\r\n          this.list = rsp.data.slice(0, 6);\r\n          this.showGraphics();\r\n          this.$Message.success(\"查询成功\");\r\n        } else {\r\n          this.$Message.error(rsp.message);\r\n        }\r\n      });\r\n    },\r\n    createPoint() {\r\n      new GDrawbuffer(window.mapview).then(gDraw => {\r\n        this.gDraw = gDraw;\r\n        this.gDraw.enableCreatePoint(this.distance, buffer => {\r\n          this.house = window.mapApi.convert.toWKTByGeometry.ToWKT(buffer);\r\n          this.pointX = buffer.centroid.x;\r\n          this.pointY = buffer.centroid.y;\r\n          console.log(buffer.centroid.latitude);\r\n          console.log(buffer.centroid.longitude);\r\n          console.log(buffer.centroid.x);\r\n          console.log(buffer.centroid.y);\r\n        });\r\n      });\r\n    },\r\n    showGraphics() {\r\n      if (this.list === 0) return;\r\n      onemap.pubsub.publish(\"drawHouseByList\", {\r\n        list: this.list,\r\n        popup: this.isPopup,\r\n        pan: this.isPan\r\n      });\r\n    }\r\n  },\r\n  components: {\r\n    toolForm,\r\n    buffer,\r\n    siteSelection\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.info {\r\n  position: absolute;\r\n  border: 1px solid #dcdee2;\r\n  background-color: #fff;\r\n  border-color: #e8eaec;\r\n  height: 670px;\r\n  overflow-y: scroll;\r\n  width: 380px;\r\n  padding: 5px;\r\n  right: 0;\r\n  top: 40px;\r\n  z-index: 99;\r\n}\r\n.itemImage {\r\n  height: 80px;\r\n  width: 130px;\r\n}\r\n.sidermenu {\r\n  justify-content: space-between;\r\n  background-color: #fcf9f2;\r\n  border-radius: 5px;\r\n  align-items: center;\r\n  display: flex;\r\n  width: 350px;\r\n  position: absolute;\r\n  border: 1px solid #dcdee2;\r\n  border-color: #e8eaec;\r\n  padding: 5px;\r\n  left: 40px;\r\n  top: 48px;\r\n  transition: all 0.2s ease-in-out;\r\n  z-index: 9999;\r\n}\r\n.kjcx {\r\n  display: block;\r\n}\r\n.ivu-layout-sider {\r\n  height: 300px;\r\n  transition: all 0.2s ease-in-out;\r\n  position: relative;\r\n  background: #fff;\r\n  min-width: 0;\r\n}\r\n.ivu-form-item {\r\n  margin-bottom: 12px;\r\n  vertical-align: top;\r\n  zoom: 1;\r\n}\r\n.menu-item-title {\r\n  height: 48px;\r\n  line-height: 48px;\r\n  font-size: 14px;\r\n  padding-left: 28px;\r\n}\r\n.layout {\r\n  height: 670px;\r\n  background: #f5f7f9;\r\n  position: relative;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.layout-header-bar {\r\n  background: #fcf9f2;\r\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\r\n}\r\n.layout-logo-left {\r\n  width: 90%;\r\n  height: 30px;\r\n  border-radius: 3px;\r\n  margin: 15px auto;\r\n}\r\n.menu-icon {\r\n  transition: all 0.3s;\r\n}\r\n.rotate-icon {\r\n  transform: rotate(-90deg);\r\n}\r\n.menu-item span {\r\n  display: inline-block;\r\n  overflow: hidden;\r\n  width: 69px;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  vertical-align: bottom;\r\n  transition: width 0.2s ease 0.2s;\r\n}\r\n.menu-item i {\r\n  transform: translateX(0px);\r\n  transition: font-size 0.2s ease, transform 0.2s ease;\r\n  vertical-align: middle;\r\n  font-size: 16px;\r\n}\r\n.collapsed-menu span {\r\n  width: 0px;\r\n  transition: width 0.2s ease;\r\n}\r\n.collapsed-menu i {\r\n  transform: translateX(5px);\r\n  transition: font-size 0.2s ease 0.2s, transform 0.2s ease 0.2s;\r\n  vertical-align: middle;\r\n  font-size: 22px;\r\n}\r\n.siderItem {\r\n  margin-left: 1px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src\\views\\spaceRecommendation"}]}