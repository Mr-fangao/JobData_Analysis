{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\网络招聘大数据分析与就业推荐系统\\备份\\jobData_Analysis\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\网络招聘大数据分析与就业推荐系统\\备份\\jobData_Analysis\\jobData_Analysis前端\\src\\views\\spaceRecommendation\\home\\index.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\网络招聘大数据分析与就业推荐系统\\备份\\jobData_Analysis\\jobData_Analysis前端\\src\\views\\spaceRecommendation\\home\\index.vue","mtime":1585387505783},{"path":"C:\\Users\\Administrator\\Desktop\\网络招聘大数据分析与就业推荐系统\\备份\\jobData_Analysis\\jobData_Analysis前端\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\网络招聘大数据分析与就业推荐系统\\备份\\jobData_Analysis\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\网络招聘大数据分析与就业推荐系统\\备份\\jobData_Analysis\\jobData_Analysis前端\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\网络招聘大数据分析与就业推荐系统\\备份\\jobData_Analysis\\jobData_Analysis前端\\node_modules\\less-loader\\dist\\cjs.js","mtime":1580901133496},{"path":"C:\\Users\\Administrator\\Desktop\\网络招聘大数据分析与就业推荐系统\\备份\\jobData_Analysis\\jobData_Analysis前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580901136398},{"path":"C:\\Users\\Administrator\\Desktop\\网络招聘大数据分析与就业推荐系统\\备份\\jobData_Analysis\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n#viewDiv {\r\n  padding: 0;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: #fcf9f2;\r\n}\r\n\r\n.main .container-fluid {\r\n  padding: 0 0px;\r\n}\r\n.search {\r\n  position: absolute;\r\n  top: 2px;\r\n  left: 40px;\r\n}\r\n.wrapperBox {\r\n  position: relative;\r\n  top: 5px;\r\n}\r\n.list-wrapper {\r\n  padding: 10px;\r\n  overflow-y: auto;\r\n}\r\n.esri-layer-list__item-title {\r\n  margin-left: 5px;\r\n  padding-left: 5px;\r\n  margin-top: 5px;\r\n}\r\n\r\n#switchbasemap {\r\n  float: left;\r\n  padding: 0 10px 0 4px;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  background: #ffffff;\r\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n  transition: all 0.2s;\r\n  cursor: pointer;\r\n}\r\n.ivu-input-group-prepend .ivu-select-selection {\r\n  border-radius: 0;\r\n  margin: -5px -1px;\r\n  border-color: #19be6b;\r\n}\r\n.ivu-input {\r\n  border-radius: 0;\r\n  border-color: #19be6b;\r\n  padding-right: 75px;\r\n}\r\n.ivu-input-wrapper > i {\r\n  width: 40px;\r\n  font-size: 16px;\r\n  background: #19be6b;\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n.close-wrapper {\r\n  z-index: 2;\r\n  position: relative;\r\n  float: right;\r\n  top: -22px;\r\n  right: 40px;\r\n  width: 30px;\r\n  text-align: center;\r\n  border-left: 1px solid #eeeeee;\r\n  cursor: pointer;\r\n}\r\n.ivu-input-icon {\r\n  width: 32px;\r\n  height: 32px;\r\n  line-height: 32px;\r\n  font-size: 16px;\r\n  text-align: center;\r\n  color: #808695;\r\n  position: absolute;\r\n  right: 0;\r\n  z-index: 3;\r\n}\r\n/* .esri-popup--is-docked-top-right .esri-popup__main-container {\r\n  max-height: 80%;\r\n  margin-top: 40px;\r\n  margin-right: 45px;\r\n} */\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgWA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src\\views\\spaceRecommendation\\home","sourcesContent":["<template>\r\n  <div id=\"viewDiv\" region=\"center\">\r\n    <div class=\"tools\">\r\n      <MapToolsView :mapView=\"mapview\" v-if=\"IsMapToolsView\" :url=\"toolsUrl\"></MapToolsView>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport esriLoader from \"esri-loader\";\r\nimport { MapAPI } from \"@/core/config/const\";\r\nimport Item from \"./components/item\";\r\nimport Register from \"@/map/api/register\";\r\nimport Server from \"@/core/server\";\r\nimport { services } from \"@/core/config/services\";\r\nimport measureArea from \"@/map/components/measureArea\";\r\nimport measureLength from \"@/map/components/measureLength\";\r\nimport MapToolsView from \"@/map/components/MapToolsView\";\r\nimport GDrawSketch from \"@/map/api/4+/GDrawSketch\";\r\nimport GConvertGeometry from \"@/map/api/js/convert/GConvertGeometry\";\r\nimport MapLayerView from \"@/map/components/MapLayerView\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      visible: false,\r\n      isShow: false,\r\n      shape: \"\",\r\n      txt_input: \"\",\r\n      list: [],\r\n      dialog: false,\r\n      pageSize: 10,\r\n      txt_select: \"小区\",\r\n      data: [],\r\n      baseLayer: \"\",\r\n      street: \"\",\r\n      isExtent: true,\r\n      isPopup: true,\r\n      isPan: true,\r\n      cityList: [\r\n        {\r\n          value: \"小区\",\r\n          label: \"小区\"\r\n        }\r\n        // {\r\n        //   value: \"单位区\",\r\n        //   label: \"单位区\"\r\n        // }\r\n      ],\r\n      defaultMapExtent: \"13391592.41591351,3404268.145961022,3\",\r\n      spatialReference: \"\",\r\n      toolsUrl: \"js/json/common_tools.json\",\r\n      mapTileLayerLayers: \"\",\r\n      TileLayerStreets: \"\",\r\n      MapImageLayer: \"\",\r\n      mapview: null,\r\n      IsMapToolsView: false,\r\n      isLayerViewShow: false\r\n    };\r\n  },\r\n  computed: {\r\n    height() {\r\n      return document.body.clientHeight - 500;\r\n    }\r\n  },\r\n  watch: {\r\n    data() {\r\n      this.onPageChange(1);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.spatialReference = \"\";\r\n    this.addLayer(mapView => {\r\n      this.mapLoaded(mapView);\r\n    });\r\n    this.register();\r\n    // setTimeout(() => {\r\n    //   this.showGraphics();\r\n    // }, 600);\r\n  },\r\n  methods: {\r\n    onControlLayerView() {\r\n      this.isLayerViewShow = !this.isLayerViewShow;\r\n      debugger;\r\n      this.$refs.layerView.showLayerView();\r\n    },\r\n    switch3d() {\r\n      this.$router.push(\"/3dmap\");\r\n    },\r\n    onClosePanel() {\r\n      this.visible = false;\r\n      this.txt_input = \"\";\r\n      this.data = [];\r\n      onemap.pubsub.publish(\"clear\");\r\n    },\r\n    register() {\r\n      //接收外部结果\r\n      onemap.pubsub.subscribe(\"showQuickSearchResult\", arg => {\r\n        this.isExtent = false;\r\n        this.isPan = false;\r\n        this.isPopup = arg.isPopup || true;\r\n        this.data = arg.list;\r\n        this.visible = true;\r\n      });\r\n      onemap.pubsub.subscribe(\"hideQuickSearchResult\", arg => {\r\n        this.visible = false;\r\n        this.data = [];\r\n      });\r\n\r\n      //clear\r\n      onemap.pubsub.subscribe(\"clear\", arg => {\r\n        this.visible = false;\r\n        // this.pa;\r\n        this.data = [];\r\n      });\r\n    },\r\n    mapLoaded(mapView) {\r\n      new Register(mapView)\r\n        .mapEvent()\r\n        .mapAPI()\r\n        .parentMapAPI();\r\n      if (this.isIQuery) {\r\n        new GIQuery({\r\n          mapView: mapView,\r\n          isPopup: this.isIPopup\r\n        }).toggle();\r\n      }\r\n    },\r\n    onToggleLayer() {\r\n      if (document.getElementsByClassName) {\r\n        var target = document.getElementsByClassName(\"esri-layer-list\");\r\n        var targetName = target[0];\r\n        if (targetName.style.display == \"block\") {\r\n          targetName.style.display = \"none\";\r\n        } else {\r\n          targetName.style.display = \"block\";\r\n        }\r\n      }\r\n    },\r\n    addLayer(callback) {\r\n      esriLoader\r\n        .loadScript({\r\n          url: MapAPI.js,\r\n          css: MapAPI.css\r\n        })\r\n        .then(r => {\r\n          esriLoader\r\n            .loadModules([\r\n              \"esri/config\",\r\n              \"esri/Map\",\r\n              \"esri/layers/GroupLayer\",\r\n              \"esri/Basemap\",\r\n              \"esri/views/MapView\",\r\n              \"esri/layers/MapImageLayer\",\r\n              \"esri/layers/TileLayer\",\r\n              \"esri/geometry/Extent\",\r\n              \"esri/widgets/LayerList\"\r\n            ])\r\n            .then(\r\n              ([\r\n                esriConfig,\r\n                Map,\r\n                GroupLayer,\r\n                Basemap,\r\n                MapView,\r\n                MapImageLayer,\r\n                TileLayer,\r\n                Extent,\r\n                LayerList,\r\n                dom,\r\n                on\r\n              ]) => {\r\n                // esriConfig.request.corsEnabledServers.push(\"122.112.216.247/\");\r\n\r\n                var activeWidget = null;\r\n\r\n                var layer = new TileLayer({\r\n                  url:\r\n                    \"http://localhost:6080/arcgis/rest/services/chouz/Map/MapServer\"\r\n                });\r\n                this.baseLayer = layer;\r\n\r\n                // var street = new TileLayer({\r\n                //   url:\r\n                //     \"https://localhost:6443/arcgis/rest/services/ChuZhou/ChuZhouYX/MapServer\",\r\n                //   visible: false\r\n                // });\r\n\r\n                // this.street = street;\r\n                // var USALayer = new MapImageLayer({\r\n                //   url:\r\n                //     \"http://122.112.216.247:6080/arcgis/rest/services/CHUZHOU/odqllj/MapServer\",\r\n                //   title: \"od成本\",\r\n                //   visible: false\r\n                // });\r\n\r\n                // var censusLayer = new MapImageLayer({\r\n                //   url:\r\n                //     \"http://122.112.216.247:6080/arcgis/rest/services/CHUZHOU/zhonguexuequ/MapServer\",\r\n                //   title: \"学区数据\",\r\n                //   opacity: 0.8,\r\n                //   visible: false\r\n                // });\r\n                var baseMap = new Basemap({\r\n                  baseLayers: [layer]\r\n                });\r\n                // var demographicGroupLayer = new GroupLayer({\r\n                //   title: \"专题图层\",\r\n                //   visible: true,\r\n                //   visibilityMode: \"independent\",\r\n                //   layers: [USALayer, censusLayer]\r\n                //   //\r\n                // });\r\n\r\n                var map = new Map({\r\n                  basemap: baseMap\r\n                  // layers: [demographicGroupLayer]\r\n                });\r\n                var ext = String(this.defaultMapExtent).split(\",\");\r\n\r\n                if (ext.length > 3) {\r\n                  console.log(\"extent 配置有误\");\r\n                  return false;\r\n                }\r\n                var zoom = parseInt(ext[2]);\r\n                var center = {\r\n                  x: parseFloat(ext[0]),\r\n                  y: parseFloat(ext[1]),\r\n                  spatialReference: this.spatialReference\r\n                };\r\n                this.mapview = new MapView({\r\n                  container: \"viewDiv\",\r\n                  map: map,\r\n                  zoom: zoom,\r\n                  center: center\r\n                });\r\n                this.mapview.ui.remove([\"attribution\", \"zoom\"]);\r\n                var view = this.mapview;\r\n                // view.when(function() {\r\n                //   var layerList = new LayerList({\r\n                //     view: view\r\n                //   });\r\n                //   view.ui.add(layerList, \"top-right\");\r\n                // });\r\n\r\n                this.mapview.initExtent = {\r\n                  center: center,\r\n                  zoom: zoom\r\n                };\r\n                window.mapview = this.mapview;\r\n                callback(this.mapview);\r\n                this.IsMapToolsView = true;\r\n              }\r\n            );\r\n        });\r\n    },\r\n    switchbasemap() {\r\n      if (this.baseLayer.visible) {\r\n        this.baseLayer.visible = false;\r\n        this.street.visible = true;\r\n      } else {\r\n        this.baseLayer.visible = true;\r\n        this.street.visible = false;\r\n      }\r\n    },\r\n    onSearchClick() {\r\n      Server.get({\r\n        url: services.houseQuery,\r\n        params: {\r\n          name: this.txt_input\r\n        }\r\n      }).then(\r\n        rsp => {\r\n          var _this = this;\r\n          if (rsp.status === 1) {\r\n            _this.data = rsp.data;\r\n            _this.list = rsp.data;\r\n          } else {\r\n            _this.data = [];\r\n          }\r\n          _this.visible = true;\r\n        },\r\n        error => {\r\n          this.$Message.warning(error.message);\r\n        }\r\n      );\r\n    },\r\n    onPageChange(page) {\r\n      let data = [];\r\n      for (\r\n        var i = (page - 1) * this.pageSize, len = this.data.length, item;\r\n        i < len, (item = this.data[i]);\r\n        i++\r\n      ) {\r\n        if (i < page * this.pageSize) {\r\n          item.pIndex = \"p\" + i;\r\n          data.push(item);\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      this.list = data;\r\n      this.showGraphics();\r\n    },\r\n    onItemClick(data) {\r\n      this.$emit(\"on-item-click\", data);\r\n      onemap.pubsub.publish(\"showQuickClick\", data);\r\n      //循环定位\r\n      for (var i = 0, g; (g = this.mapview.graphics.items[i]); i++) {\r\n        if (g.attributes.id === data.pIndex) {\r\n          var geometry = null;\r\n          if (g.geometry.type === \"point\") {\r\n            geometry = g.geometry;\r\n          } else {\r\n            var extent = g.geometry.extent.clone();\r\n            geometry = extent.expand(2);\r\n          }\r\n          this.mapview.goTo(geometry);\r\n          var attributes = g.attributes;\r\n          mapApi.popup.show({\r\n            mapView: this.mapview,\r\n            res: attributes.attr,\r\n            centerPt: attributes.centerPt\r\n          });\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    showGraphics() {\r\n      this.mapview.graphics.removeAll();\r\n      if (this.list === 0) return;\r\n      onemap.pubsub.publish(\"drawPolygonByList\", {\r\n        list: this.list,\r\n        extent: this.isExtent\r\n      });\r\n      onemap.pubsub.publish(\"drawMarkerByList\", {\r\n        list: this.list,\r\n        popup: this.isPopup,\r\n        pan: this.isPan\r\n      });\r\n    },\r\n    watchLayer() {}\r\n  },\r\n  components: {\r\n    measureArea,\r\n    measureLength,\r\n    MapToolsView,\r\n    Item,\r\n    MapLayerView\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n#viewDiv {\r\n  padding: 0;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: #fcf9f2;\r\n}\r\n\r\n.main .container-fluid {\r\n  padding: 0 0px;\r\n}\r\n.search {\r\n  position: absolute;\r\n  top: 2px;\r\n  left: 40px;\r\n}\r\n.wrapperBox {\r\n  position: relative;\r\n  top: 5px;\r\n}\r\n.list-wrapper {\r\n  padding: 10px;\r\n  overflow-y: auto;\r\n}\r\n.esri-layer-list__item-title {\r\n  margin-left: 5px;\r\n  padding-left: 5px;\r\n  margin-top: 5px;\r\n}\r\n\r\n#switchbasemap {\r\n  float: left;\r\n  padding: 0 10px 0 4px;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  background: #ffffff;\r\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n  transition: all 0.2s;\r\n  cursor: pointer;\r\n}\r\n.ivu-input-group-prepend .ivu-select-selection {\r\n  border-radius: 0;\r\n  margin: -5px -1px;\r\n  border-color: #19be6b;\r\n}\r\n.ivu-input {\r\n  border-radius: 0;\r\n  border-color: #19be6b;\r\n  padding-right: 75px;\r\n}\r\n.ivu-input-wrapper > i {\r\n  width: 40px;\r\n  font-size: 16px;\r\n  background: #19be6b;\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n.close-wrapper {\r\n  z-index: 2;\r\n  position: relative;\r\n  float: right;\r\n  top: -22px;\r\n  right: 40px;\r\n  width: 30px;\r\n  text-align: center;\r\n  border-left: 1px solid #eeeeee;\r\n  cursor: pointer;\r\n}\r\n.ivu-input-icon {\r\n  width: 32px;\r\n  height: 32px;\r\n  line-height: 32px;\r\n  font-size: 16px;\r\n  text-align: center;\r\n  color: #808695;\r\n  position: absolute;\r\n  right: 0;\r\n  z-index: 3;\r\n}\r\n/* .esri-popup--is-docked-top-right .esri-popup__main-container {\r\n  max-height: 80%;\r\n  margin-top: 40px;\r\n  margin-right: 45px;\r\n} */\r\n</style>"]}]}