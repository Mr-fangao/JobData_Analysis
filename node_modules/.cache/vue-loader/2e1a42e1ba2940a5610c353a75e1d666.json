{"remainingRequest":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\src\\views\\map\\index.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\src\\views\\map\\index.vue","mtime":1583567173004},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580901136398},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.threeMap {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 104px;\r\n}\r\n.left {\r\n  width: 410px;\r\n  height: 150px;\r\n}\r\n.layout-header-bar {\r\n  background: #fff;\r\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\r\n}\r\n.ivu-layout-sider {\r\n  height: 1000px;\r\n}\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src\\views\\map","sourcesContent":["<template>\r\n  <layout>\r\n    <Sider ref=\"side1\" :width='180'>\r\n      <sider-menu/>\r\n    </Sider>\r\n    <Content>\r\n      <Header :style=\"{padding: 0}\" class=\"layout-header-bar\">\r\n        <Breadcrumb>\r\n          <Icon :class=\"rotateIcon\" :style=\"{margin: '0 5px'}\" type=\"md-menu\" size=\"25\"></Icon>\r\n          <BreadcrumbItem v-for=\"(item,idx) in $route.matched\" :key=\"idx\" :to=\"(item.path)\">{{item.name}}</BreadcrumbItem>\r\n        </Breadcrumb>\r\n      </Header>\r\n      <div class=\"animated fadeIn\">\r\n        <div id=\"viewDiv\">\r\n        </div>\r\n        <div class=\"threeMap\">\r\n          <Button @click=\"go2D\" icon=\"android-globe\">二维地图</Button>\r\n        </div>\r\n      </div>\r\n    </Content>\r\n  </layout>\r\n\r\n</template>\r\n<script>\r\nimport SiderMenu from \"@/views/main/siderMenu\";\r\nimport axios from \"axios\";\r\nimport esriLoader from \"esri-loader\";\r\nimport { MapAPI } from \"@/core/config/const\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      mapTileLayerLayers: \"\",\r\n      TileLayerStreets: \"\",\r\n      MapImageLayer: \"\",\r\n      IsMapToolsView: true,\r\n      toolsUrl: \"static/map/tools.json\",\r\n      mapView: null\r\n    };\r\n  },\r\n  mounted() {\r\n    this.addLayer();\r\n  },\r\n  methods: {\r\n    getGoodsList() {\r\n      axios.get(\"/static/layer.json\").then(res => {\r\n        var result = res.data;\r\n      });\r\n    },\r\n    addLayer() {\r\n      esriLoader\r\n        .loadScript({\r\n          url: MapAPI.js,\r\n          css: MapAPI.css\r\n        })\r\n        .then(r => {\r\n          esriLoader\r\n            .loadModules([\r\n              \"esri/config\",\r\n              \"esri/Map\",\r\n              \"esri/Basemap\",\r\n              \"esri/views/MapView\",\r\n              \"esri/views/SceneView\",\r\n              \"esri/layers/TileLayer\",\r\n              \"esri/layers/FeatureLayer\",\r\n              \"esri/layers/MapImageLayer\",\r\n              \"dojo/dom\",\r\n              \"dojo/on\",\r\n              \"dojo/domReady!\"\r\n            ])\r\n            .then(\r\n              ([\r\n                esriConfig,\r\n                Map,\r\n                Basemap,\r\n                MapView,\r\n                SceneView,\r\n                TileLayer,\r\n                FeatureLayer,\r\n                MapImageLayer,\r\n                dom,\r\n                on\r\n              ]) => {\r\n                var street = new TileLayer({\r\n                  url:\r\n                    \"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer\"\r\n                });\r\n                var housingLayer = new TileLayer({\r\n                  url:\r\n                    \"http://122.112.216.247:6080/arcgis/rest/services/Servers/Map/MapServer\",\r\n                  id: \"ny-housing\",\r\n                  opacity: 0.9\r\n                });\r\n                var renderer = {\r\n                  type: \"simple\", // autocasts as new SimpleRenderer()\r\n                  symbol: {\r\n                    type: \"polygon-3d\", // autocasts as new PolygonSymbol3D()\r\n                    symbolLayers: [\r\n                      {\r\n                        type: \"extrude\", // autocasts as new ExtrudeSymbol3DLayer()\r\n                        material: { color: [203, 177, 152] }\r\n                      }\r\n                    ]\r\n                  },\r\n                  visualVariables: [\r\n                    {\r\n                      type: \"size\",\r\n                      field: \"Floor\"\r\n                    }\r\n                  ]\r\n                };\r\n\r\n                var buildingLayer = new FeatureLayer({\r\n                  url:\r\n                    \"http://122.112.216.247:6080/arcgis/rest/services/jinzhu2/MapServer/0\",\r\n                  opacity: 0.9,\r\n                  renderer: renderer,\r\n                  outFields: [\"Floor\"],\r\n                  popupTemplate: {\r\n                    title: \"{Floor}\",\r\n                    content: \"地块编号:{Floor}<br/>地上层数:{Floor}\", // autocasts as new PopupTemplate()\r\n                    fieldInfos: [\r\n                      {\r\n                        fieldName: \"Floor\",\r\n                        format: {\r\n                          digitSeparator: true,\r\n                          places: 0\r\n                        }\r\n                      }\r\n                    ]\r\n                  }\r\n                });\r\n\r\n                var baseMap = new Basemap({\r\n                  baseLayers: [street, housingLayer]\r\n                });\r\n                var layer = new TileLayer({\r\n                  url:\r\n                    \"http://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer\"\r\n                });\r\n                // var layer = new MapImageLayer({\r\n                //   url:\r\n                //     \"https://192.168.122.13:6443/arcgis/rest/services/WGS84/sx/MapServer\"\r\n                // });\r\n\r\n                var map = new Map({\r\n                  basemap: baseMap,\r\n                  layers: [buildingLayer, layer]\r\n                });\r\n\r\n                var view = new SceneView({\r\n                  container: \"viewDiv\",\r\n                  map: map\r\n                });\r\n\r\n                view.on(\"layerview-create\", function(event) {\r\n                  if (event.layer.id === \"ny-housing\") {\r\n                    // Explore the properties of the population layer's layer view here\r\n                    console.log(\r\n                      \"LayerView for male population created!\",\r\n                      event.layerView\r\n                    );\r\n                  }\r\n                  if (event.layer.id === \"streets\") {\r\n                    // Explore the properties of the transportation layer's layer view here\r\n                    // Explore the properties of the transportation layer's layer view here\r\n                    console.log(\r\n                      \"LayerView for streets created!\",\r\n                      event.layerView\r\n                    );\r\n                  }\r\n                });\r\n\r\n                view.when(function() {\r\n                  housingLayer.when(function() {\r\n                    view.goTo(housingLayer.fullExtent);\r\n                  });\r\n                });\r\n\r\n                var streetsLayerToggle = dom.byId(\"streetsLayer\");\r\n              }\r\n            );\r\n        });\r\n    },\r\n    go2D() {\r\n      this.$router.push(\"/locationResources\");\r\n    }\r\n  },\r\n  components: {\r\n    SiderMenu\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.threeMap {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 104px;\r\n}\r\n.left {\r\n  width: 410px;\r\n  height: 150px;\r\n}\r\n.layout-header-bar {\r\n  background: #fff;\r\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\r\n}\r\n.ivu-layout-sider {\r\n  height: 1000px;\r\n}\r\n</style>\r\n"]}]}