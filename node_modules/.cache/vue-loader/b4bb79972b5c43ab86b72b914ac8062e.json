{"remainingRequest":"E:\\04 GIS相关比赛\\05 “创青春”比赛(省赛阶段)\\07 系统代码\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\04 GIS相关比赛\\05 “创青春”比赛(省赛阶段)\\07 系统代码\\jobData_Analysis前端\\src\\views\\spaceRecommendation\\home\\components\\siteSelection.vue?vue&type=style&index=0&id=2395f9a2&lang=less&scoped=true&","dependencies":[{"path":"E:\\04 GIS相关比赛\\05 “创青春”比赛(省赛阶段)\\07 系统代码\\jobData_Analysis前端\\src\\views\\spaceRecommendation\\home\\components\\siteSelection.vue","mtime":1580899747520},{"path":"E:\\04 GIS相关比赛\\05 “创青春”比赛(省赛阶段)\\07 系统代码\\jobData_Analysis前端\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\04 GIS相关比赛\\05 “创青春”比赛(省赛阶段)\\07 系统代码\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\04 GIS相关比赛\\05 “创青春”比赛(省赛阶段)\\07 系统代码\\jobData_Analysis前端\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\04 GIS相关比赛\\05 “创青春”比赛(省赛阶段)\\07 系统代码\\jobData_Analysis前端\\node_modules\\less-loader\\dist\\cjs.js","mtime":1580901133496},{"path":"E:\\04 GIS相关比赛\\05 “创青春”比赛(省赛阶段)\\07 系统代码\\jobData_Analysis前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580901136398},{"path":"E:\\04 GIS相关比赛\\05 “创青春”比赛(省赛阶段)\\07 系统代码\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.dock {\r\n  position: absolute;\r\n  background: white;\r\n  z-index: 3;\r\n  top: 75px;\r\n  bottom: 0;\r\n  width: 320px;\r\n  border-right: 1px solid #d2d2d2;\r\n  border-left: 1px solid #d2d2d2;\r\n  -webkit-transition: all 0.2s;\r\n  transition: all 0.2s;\r\n  .dock-section {\r\n    @cap: 37px;\r\n    height: calc(~\"100% - @{cap}\");\r\n  }\r\n  .dock-header {\r\n    padding: 0 15px;\r\n    background: #f8f8f8;\r\n    .wrapper {\r\n      height: 37px;\r\n      line-height: 37px;\r\n      border-bottom: 1px solid #d2d2d2;\r\n      .title {\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n      }\r\n      .closebtn {\r\n        float: right;\r\n        font-size: 16px;\r\n        cursor: pointer;\r\n        &:hover {\r\n          color: red;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nheader {\r\n  padding: 10px 20px;\r\n  background: #f8f8f8;\r\n  height: 210px;\r\n}\r\nsection {\r\n  overflow: hidden;\r\n  overflow-y: scroll;\r\n}\r\nnav {\r\n  height: 30px;\r\n  background: #f8f8f8;\r\n  border-bottom: 1px solid #d2d2d2;\r\n  ul {\r\n    float: left;\r\n  }\r\n  li {\r\n    width: 70px;\r\n    padding: 5px 10px 6px;\r\n    margin-left: 20px;\r\n    text-align: center;\r\n    background: #fff;\r\n    border: 1px solid #d2d2d2;\r\n    border-bottom: 0;\r\n  }\r\n  .result {\r\n    float: right;\r\n    margin: 4px 20px 0 0;\r\n    .total {\r\n      color: #19be6b;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n.title {\r\n  font-size: 14px;\r\n  // font-weight: 600;\r\n  color: black;\r\n  padding-left: 5px;\r\n}\r\n.closebtn {\r\n  float: right;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  padding: 10px 0px 5px 5px;\r\n}\r\n.label {\r\n  text-align: right;\r\n  padding: 5px 8px 0 0;\r\n}\r\n",{"version":3,"sources":["siteSelection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"siteSelection.vue","sourceRoot":"src\\views\\spaceRecommendation\\home\\components","sourcesContent":["<template>\r\n  <div class=\"dock\">\r\n    <div class=\"dock-header\">\r\n      <div class=\"wrapper\">\r\n        <span class=\"icon-grid\"></span>\r\n        <span class=\"title\">条件选房</span>\r\n        <span class=\"icon-close closebtn\" @click=\"select\"></span>\r\n      </div>\r\n    </div>\r\n    <header>\r\n      <Row>\r\n        <i-col :span=\"5\" class=\"label\">行政区划</i-col>\r\n        <i-col :span=\"19\">\r\n          <i-select v-model=\"district\" style=\"padding-bottom: 10px\">\r\n            <i-option value=\"琅琊区\">琅琊区</i-option>\r\n            <i-option value=\"南谯区\">南谯区</i-option>\r\n          </i-select>\r\n        </i-col>\r\n      </Row>\r\n      <Row>\r\n        <i-col :span=\"5\" class=\"label\">房源类型</i-col>\r\n        <i-col :span=\"19\">\r\n          <i-select v-model=\"buildingType\" style=\"padding-bottom: 10px\">\r\n            <i-option value=\"住宅\">住宅</i-option>\r\n            <i-option value=\"公寓式住宅\">公寓式住宅</i-option>\r\n            <i-option value=\"商铺\">商铺</i-option>\r\n            <i-option value=\"别墅\">别墅</i-option>\r\n          </i-select>\r\n        </i-col>\r\n      </Row>\r\n      <Row>\r\n        <i-col :span=\"5\" class=\"label\">价格</i-col>\r\n        <i-col :span=\"19\">\r\n          <div style=\"padding-bottom:10px\">\r\n            <InputNumber :max=\"100000\" :min=\"1\" v-model=\"minPrice\" style=\"padding-bottom: 10px\"></InputNumber>\r\n            <span style=\"margin-left: 5px\">至</span>\r\n            <InputNumber :max=\"100000\" :min=\"1\" v-model=\"maxPrice\" style=\"padding-bottom: 10px; margin-left: 5px\"></InputNumber>\r\n            <span style=\"margin-left: 10px\">元</span>\r\n          </div>\r\n        </i-col>\r\n      </Row>\r\n      <Row>\r\n        <i-col :span=\"5\" class=\"label\">面积</i-col>\r\n        <i-col :span=\"19\">\r\n          <div style=\"padding-bottom: 10px\">\r\n            <InputNumber :max=\"1000\" :min=\"1\" v-model=\"minArea \" style=\"padding-bottom: 10px\"></InputNumber>\r\n            <span style=\"margin-left: 5px\">至</span>\r\n            <InputNumber :max=\"10000\" :min=\"1\" v-model=\"maxArea \" style=\"padding-bottom: 10px; margin-left: 5px\"></InputNumber>\r\n            <span style=\"margin-left: 10px\">m^2</span>\r\n          </div>\r\n        </i-col>\r\n      </Row>\r\n      <Button @click=\"onAnalysis\" style=\"float: right\" long type=\"primary\">查询</Button>\r\n    </header>\r\n    <nav>\r\n      <ul>\r\n        <li>搜索结果</li>\r\n      </ul>\r\n      <span class=\"result\">共\r\n        <span class=\"total\">{{total}}</span> 个</span>\r\n    </nav>\r\n    <section :style=\"{height:height+'px'}\">\r\n      <list-item v-for=\"(item,index) in list\" :key=\"index\" :data=\"item\" :index=\"index+1\" @on-item-click=\"onItemClick\" />\r\n    </section>\r\n    <footer v-if=\"data.length>pageSize\">\r\n      <page :total=\"data.length\" :page-size=\"pageSize\" size=\"small\" @on-change=\"onPageChange\"></page>\r\n    </footer>\r\n    <div class=\"list-group\" style=\"height: 0px;\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Server from \"@/core/server\";\r\nimport ListItem from \"./list-item\";\r\nimport { services } from \"@/core/config/services\";\r\nimport Register from \"@/map/api/register\";\r\nexport default {\r\n  props: [\"site\"],\r\n  data() {\r\n    return {\r\n      data: [],\r\n      list: [],\r\n      height: 390,\r\n      pageSize: 10,\r\n      current: 1,\r\n      district: \"\",\r\n      buildingType: \"\",\r\n      total: \"\",\r\n      minPrice: 0,\r\n      maxPrice: 100000,\r\n      minArea: 0,\r\n      maxArea: 100000\r\n    };\r\n  },\r\n  watch: {\r\n    data() {\r\n      //计算高度\r\n      this.onPageChange(1);\r\n      this.current = 1;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.mapLoaded();\r\n  },\r\n  methods: {\r\n    mapLoaded() {\r\n      new Register(window.mapview)\r\n        .mapEvent()\r\n        .mapAPI()\r\n        .parentMapAPI();\r\n      if (this.isIQuery) {\r\n        new GIQuery({\r\n          mapView: mapview,\r\n          isPopup: this.isIPopup\r\n        }).toggle();\r\n      }\r\n    },\r\n    select() {\r\n      this.$emit(\"change\", false);\r\n    },\r\n    onAnalysis() {\r\n      Server.get({\r\n        url: services.selectHouse,\r\n        params: {\r\n          district: this.district,\r\n          buildingType: this.buildingType,\r\n          minPrice: this.minPrice,\r\n          maxPrice: this.maxPrice,\r\n          minArea: this.minArea,\r\n          maxArea: this.maxArea\r\n        }\r\n      }).then(rsp => {\r\n        if (rsp.status === 1) {\r\n          this.data = rsp.data;\r\n          this.total = rsp.length;\r\n          onemap.pubsub.publish(\"drawPolygonByList\", {\r\n            list: rsp.data,\r\n            popup: true\r\n          });\r\n        } else {\r\n          console.log(rsp.message);\r\n        }\r\n      });\r\n    },\r\n    onItemClick(item) {\r\n      onemap.pubsub.publish(\"location\", {\r\n        pIndex: item.pIndex\r\n      });\r\n    },\r\n    onPageChange(page) {\r\n      var data = [];\r\n      for (\r\n        var i = (page - 1) * this.pageSize, len = this.data.length, item;\r\n        i < len, (item = this.data[i]);\r\n        i++\r\n      ) {\r\n        if (i < page * this.pageSize) {\r\n          item.pIndex = \"p\" + i;\r\n          data.push(item);\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      this.list = data;\r\n      setTimeout(() => {\r\n        this.showGraphics();\r\n      }, 100);\r\n    },\r\n    showGraphics() {\r\n      mapview.graphics.removeAll();\r\n      //render graphic\r\n      if (this.list === 0) return;\r\n      onemap.pubsub.publish(\"drawPolygonByList\", {\r\n        list: this.list,\r\n        extent: true\r\n      });\r\n      onemap.pubsub.publish(\"drawMarkerByList\", {\r\n        list: this.list,\r\n        popup: true,\r\n        pan: false\r\n      });\r\n    }\r\n  },\r\n  components: {\r\n    ListItem\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.dock {\r\n  position: absolute;\r\n  background: white;\r\n  z-index: 3;\r\n  top: 75px;\r\n  bottom: 0;\r\n  width: 320px;\r\n  border-right: 1px solid #d2d2d2;\r\n  border-left: 1px solid #d2d2d2;\r\n  -webkit-transition: all 0.2s;\r\n  transition: all 0.2s;\r\n  .dock-section {\r\n    @cap: 37px;\r\n    height: calc(~\"100% - @{cap}\");\r\n  }\r\n  .dock-header {\r\n    padding: 0 15px;\r\n    background: #f8f8f8;\r\n    .wrapper {\r\n      height: 37px;\r\n      line-height: 37px;\r\n      border-bottom: 1px solid #d2d2d2;\r\n      .title {\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n      }\r\n      .closebtn {\r\n        float: right;\r\n        font-size: 16px;\r\n        cursor: pointer;\r\n        &:hover {\r\n          color: red;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nheader {\r\n  padding: 10px 20px;\r\n  background: #f8f8f8;\r\n  height: 210px;\r\n}\r\nsection {\r\n  overflow: hidden;\r\n  overflow-y: scroll;\r\n}\r\nnav {\r\n  height: 30px;\r\n  background: #f8f8f8;\r\n  border-bottom: 1px solid #d2d2d2;\r\n  ul {\r\n    float: left;\r\n  }\r\n  li {\r\n    width: 70px;\r\n    padding: 5px 10px 6px;\r\n    margin-left: 20px;\r\n    text-align: center;\r\n    background: #fff;\r\n    border: 1px solid #d2d2d2;\r\n    border-bottom: 0;\r\n  }\r\n  .result {\r\n    float: right;\r\n    margin: 4px 20px 0 0;\r\n    .total {\r\n      color: #19be6b;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n.title {\r\n  font-size: 14px;\r\n  // font-weight: 600;\r\n  color: black;\r\n  padding-left: 5px;\r\n}\r\n.closebtn {\r\n  float: right;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  padding: 10px 0px 5px 5px;\r\n}\r\n.label {\r\n  text-align: right;\r\n  padding: 5px 8px 0 0;\r\n}\r\n</style>\r\n"]}]}