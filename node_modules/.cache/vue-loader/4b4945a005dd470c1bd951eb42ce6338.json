{"remainingRequest":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\src\\views\\test\\buffer.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\src\\views\\test\\buffer.vue","mtime":1583567173006},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580901136398},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\01 GIS省赛(中期检查+收尾)\\04 系统运行代码\\Code\\前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n#viewDiv {\r\n  padding: 0;\r\n  margin: 0;\r\n  height: 800px;\r\n  width: 100%;\r\n}\r\n",{"version":3,"sources":["buffer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;AACA;AACA","file":"buffer.vue","sourceRoot":"src\\views\\test","sourcesContent":["<template>\r\n  <div id=\"viewDiv\">\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport esriLoader from \"esri-loader\";\r\nimport { MapAPI } from \"@/core/config/const\";\r\nimport { constants } from \"fs\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      mapTileLayerLayers: \"\",\r\n      TileLayerStreets: \"\",\r\n      MapImageLayer: \"\",\r\n      view: null,\r\n      IsMapToolsView: false,\r\n      from: \"\",\r\n      Mymap: \"\",\r\n      mapViewL: null,\r\n      mapViewR: null,\r\n      left: \"-100px\",\r\n      top: \"-100px\",\r\n      width: 0,\r\n      feature: \"\",\r\n      results: \"\"\r\n    };\r\n  },\r\n  mounted() {\r\n    this.addLayerL();\r\n  },\r\n  methods: {\r\n    addLayerL() {\r\n      esriLoader\r\n        .loadScript({\r\n          url: MapAPI.js,\r\n          css: MapAPI.css\r\n        })\r\n        .then(r => {\r\n          esriLoader\r\n            .loadModules([\r\n              \"esri/Map\",\r\n              \"esri/Basemap\",\r\n              \"esri/views/MapView\",\r\n              \"esri/layers/MapImageLayer\",\r\n              \"esri/layers/TileLayer\",\r\n              \"esri/tasks/support/LinearUnit\",\r\n              \"esri/layers/FeatureLayer\",\r\n              \"esri/tasks/QueryTask\",\r\n              \"esri/tasks/support/Query\",\r\n              \"esri/tasks/Geoprocessor\",\r\n              \"esri/tasks/support/FeatureSet\"\r\n            ])\r\n            .then(\r\n              ([\r\n                Map,\r\n                Basemap,\r\n                MapView,\r\n                MapImageLayer,\r\n                TileLayer,\r\n                LinearUnit,\r\n                FeatureLayer,\r\n                QueryTask,\r\n                Query,\r\n                Geoprocessor,\r\n                dom,\r\n                on\r\n              ]) => {\r\n                var activeWidget = null;\r\n\r\n                // var street = new MapImageLayer({\r\n                //   url:\r\n                //     \"http://122.112.216.247:6080/arcgis/rest/services/Server/MAP/MapServer\"\r\n                // });\r\n                var street = new TileLayer({\r\n                  url:\r\n                    \"http://122.112.216.247:6080/arcgis/rest/services/Servers/Map/MapServer\"\r\n                });\r\n                var dis = new LinearUnit({\r\n                  distance: 1000,\r\n                  units: \"esriMeters\"\r\n                });\r\n                this.distance = dis;\r\n                var baseMap = new Basemap({\r\n                  baseLayers: [street]\r\n                });\r\n                var map = new Map({\r\n                  basemap: baseMap\r\n                  // layers: [layer]\r\n                });\r\n                this.myMap = map;\r\n\r\n                this.mapViewL = new MapView({\r\n                  container: \"viewDiv\",\r\n                  map: map\r\n                });\r\n                var gwrPOint =\r\n                  \"http://122.112.216.247:6080/arcgis/rest/services/Servers/gwrfeature/MapServer/0\";\r\n\r\n                var queryTask = new QueryTask({\r\n                  url: gwrPOint\r\n                });\r\n                var query = new Query();\r\n                query.returnGeometry = true;\r\n                query.outFields = [\"*\"];\r\n                query.where = \"PRICE>='3946'\";\r\n                // queryTask.execute(query, this.doGP);\r\n                // queryTask.execute(query).then(function(results) {\r\n                //   this.doGP(results);\r\n                // });\r\n\r\n                queryTask.execute(query).then(this.doGP);\r\n              }\r\n            );\r\n        });\r\n    },\r\n    doGP(featureSet) {\r\n      var gpUrl =\r\n        \"http://122.112.216.247:6080/arcgis/rest/services/Servers/buffer/GPServer/buffer\";\r\n      mapApi.esriApi.GetGeoprocessor().then(Geoprocessor => {\r\n        var _this = this;\r\n        var Kriging_GP = new Geoprocessor(gpUrl);\r\n        var parms = {\r\n          SDE_DJGWR: featureSet,\r\n          Distance__value_or_field_: this.distance\r\n        };\r\n        Kriging_GP.submitJob(parms).then(jobinfo => {\r\n          if (jobinfo.jobStatus == \"job-succeeded\") {\r\n            Kriging_GP.getResultData(\r\n              jobinfo.jobId,\r\n              \"Output_Feature_Class\"\r\n            ).then(function(results) {\r\n              console.log(\"projected points: \", results.value);\r\n              var GwrPoint = results.value.features;\r\n              var polygonSymbol = {\r\n                type: \"simple-fill\", // autocasts as new SimpleFillSymbol()\r\n                color: [51, 51, 204, 0.9],\r\n                style: \"solid\",\r\n                outline: {\r\n                  // autocasts as new SimpleLineSymbol()\r\n                  color: \"blue\",\r\n                  width: 1\r\n                }\r\n              };\r\n              GwrPoint.forEach((GwrPoint, index) => {\r\n                mapApi.esriApi.GetGraphic().then(Graphic => {\r\n                  let graphics = [];\r\n                  let graphic = new Graphic({\r\n                    geometry: GwrPoint.geometry,\r\n                    symbol: polygonSymbol\r\n                  });\r\n                  graphics.push(graphic);\r\n                  console.log(graphics);\r\n                  _this.mapViewL.graphics.addMany(graphics);\r\n                });\r\n              });\r\n\r\n              console.log(GwrPoints);\r\n            });\r\n          }\r\n        });\r\n      });\r\n\r\n      //   Kriging_GP.submitJob(params).then(this.gpJobComplete);\r\n    },\r\n    // gpJobComplete(jobinfo) {\r\n    //   console.log(jobinfo);\r\n    //   debugger;\r\n    //   if (jobinfo.jobStatus == \"job-succeeded\") {\r\n    //     Kriging_GP.getResultData(\r\n    //       jobinfo.jobId,\r\n    //       \"GeographicallyWeightedRegression10\",\r\n    //       result\r\n    //     );\r\n    //   }\r\n    // },\r\n    addResult(results) {\r\n      console.log(results);\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      social: []\r\n    };\r\n  }\r\n};\r\n</script>\r\n<style>\r\n#viewDiv {\r\n  padding: 0;\r\n  margin: 0;\r\n  height: 800px;\r\n  width: 100%;\r\n}\r\n</style>\r\n\r\n"]}]}