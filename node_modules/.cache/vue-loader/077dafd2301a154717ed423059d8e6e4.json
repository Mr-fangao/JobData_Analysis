{"remainingRequest":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\03 计算机设计大赛(刚开始)\\03 系统运行代码\\Code\\前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\asus\\Desktop\\GIS相关比赛\\03 计算机设计大赛(刚开始)\\03 系统运行代码\\Code\\前端\\src\\views\\userManager\\components\\userIndex.vue?vue&type=style&index=0&id=7b1248bf&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\03 计算机设计大赛(刚开始)\\03 系统运行代码\\Code\\前端\\src\\views\\userManager\\components\\userIndex.vue","mtime":1585385269457},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\03 计算机设计大赛(刚开始)\\03 系统运行代码\\Code\\前端\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\03 计算机设计大赛(刚开始)\\03 系统运行代码\\Code\\前端\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\03 计算机设计大赛(刚开始)\\03 系统运行代码\\Code\\前端\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\03 计算机设计大赛(刚开始)\\03 系统运行代码\\Code\\前端\\node_modules\\less-loader\\dist\\cjs.js","mtime":1580901133496},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\03 计算机设计大赛(刚开始)\\03 系统运行代码\\Code\\前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580901136398},{"path":"C:\\Users\\asus\\Desktop\\GIS相关比赛\\03 计算机设计大赛(刚开始)\\03 系统运行代码\\Code\\前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.userHeader {\n  height: 50px;\n  margin-top: 15px;\n}\n.search-input-default {\n  margin-right: 10px;\n}\n",{"version":3,"sources":["userIndex.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoPA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userIndex.vue","sourceRoot":"src\\views\\userManager\\components","sourcesContent":["<template>\n  <div class=\"page-style\" style=\"margin: 10px\">\n    <div class=\"userHeader\">\n      <span style=\"margin-left:5px\">账号：</span>\n      <Input class=\"control search-input-default\" style=\"width: 200px\" clearable v-model=\"username\" @on-enter=\"onSearch\" />\n      <span>昵称：</span>\n      <Input class=\"control search-input-default\" style=\"width: 200px\" clearable v-model=\"nickName\" @on-enter=\"onSearch\" />\n      <search-buttons :showSearch=\"true\" @on-search=\"onSearch\" @on-refresh=\"onRefresh\"></search-buttons>\n    </div>\n    <div class=\"section main-table-section\">\n      <Table :loading=\"loading\" border :columns=\"table.columns\" :data=\"table.data\"></Table>\n    </div>\n    <Modal v-model=\"dialog\" :mask-closable=\"false\" width=\"800\" title=\"用户管理\">\n      <user-form ref=\"userform\" />\n      <modal-footer slot=\"footer\" @on-save=\"savePerson\" @on-cancel=\"onCancelPerson\"></modal-footer>\n    </Modal>\n  </div>\n</template>\n<script>\nimport Server from \"@/core/server\";\nimport { services } from \"@/core/config/services\";\nimport SearchButtons from \"@/components/common/search-buttons\";\nimport modalFooter from \"@/components/common/modal-footer\";\nimport userForm from \"./userForm.vue\";\nexport default {\n  data() {\n    return {\n      dialog: false,\n      accountname: \"\",\n      username: \"\",\n      nickName: \"\",\n      loading: false,\n      table: {\n        columns: [\n          {\n            type: \"index\",\n            width: 60,\n            align: \"center\"\n          },\n          {\n            title: \"账号\",\n            key: \"username\",\n            sortable: true,\n            align: \"center\"\n          },\n          {\n            title: \"昵称\",\n            key: \"nickName\",\n            align: \"center\"\n          },\n          {\n            title: \"密码\",\n            key: \"password\",\n            align: \"center\"\n          },\n          {\n            title: \"年龄等级\",\n            key: \"age\",\n            maxWidth: 80,\n            align: \"center\"\n          },\n          {\n            title: \"文化程度等级\",\n            key: \"userEducationLevel\",\n            align: \"center\"\n          },\n          {\n            title: \"家庭收入等级\",\n            key: \"money\",\n            align: \"center\"\n          },\n          {\n            title: \"手机号码\",\n            key: \"mobile\",\n            maxWidth: 150,\n            align: \"center\"\n          },\n\n          // {\n          //   title: \"电脑端\",\n          //   key: \"isEnablePC\",\n          //   maxWidth: 90,\n          //   align: \"center\",\n          //   render: (h, params) => {\n          //     return h(\"Tag\", {\n          //       props: {\n          //         color: params.row.isEnablePC === married ? \"success\" : \"gray\",\n          //         type: \"dot\"\n          //       }\n          //     });\n          //   }\n          // },\n          {\n            title: \"操作\",\n            key: \"action\",\n            maxWidth: 150,\n            align: \"center\",\n            render: (h, params) => {\n              return h(\"div\", [\n                h(\"i-button\", {\n                  props: {\n                    shape: \"circle\",\n                    icon: \"ios-create\"\n                  },\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  on: {\n                    click: () => {\n                      this.onRowClick(params.row, params.index);\n                    }\n                  }\n                }),\n                h(\"i-button\", {\n                  props: {\n                    shape: \"circle\",\n                    icon: \"ios-trash\"\n                  },\n                  style: {\n                    cursor: \"pointer\"\n                  },\n                  on: {\n                    click: () => {\n                      this.remove(params.row, params.index);\n                    }\n                  }\n                })\n              ]);\n            }\n          }\n        ],\n        data: []\n      }\n    };\n  },\n  mounted() {\n    this.getTable();\n  },\n  methods: {\n    getTable() {\n      debugger;\n      var userId = JSON.parse(sessionStorage.getItem(\"userId\"));\n      // var nickName = JSON.parse(sessionStorage.getItem(\"nickName\"));\n      // var userName = JSON.parse(sessionStorage.getItem(\"userName\"));\n      //   this.loading = true;\n      Server.post({\n        url: services.usermanager,\n        params: {\n          nickName: this.nickName,\n          queryUsername: this.username,\n          userId: userId\n        }\n      }).then(rsp => {\n        // this.loading = false;\n        this.table.data = rsp.data;\n      });\n    },\n    //刷新\n    onRefresh() {\n      this.getTable();\n    },\n    //查询\n    onSearch() {\n      this.onRefresh();\n    },\n    //新增\n    onAdd() {\n      this.dialog = true;\n      this.$refs.userform.resetForm();\n    },\n    //编辑\n    onRowClick(currentRow, index) {\n      currentRow.Index = index;\n      this.selectedRow = currentRow;\n      var row = this.selectedRow;\n      if (!row) {\n        this.$Message.warning(\"请选择需要操作的行\");\n      } else {\n        var form = this.$refs.userform.editForm(row);\n        this.dialog = true;\n      }\n    },\n    //删除\n    remove(currentRow, index) {\n      debugger;\n      currentRow.Index = index;\n      this.selectedRow = currentRow;\n      var row = this.selectedRow;\n      if (!row) {\n        this.$Message.warning(\"请选择需要删除的行\");\n      } else {\n        this.$Modal.confirm({\n          title: \"提示\",\n          content: \"是否永久删除此数据?\",\n          onOk: () => {\n            var id = row.userId;\n            Server.get({\n              url: services.deleteUser,\n              params: {\n                userId: id\n              }\n            }).then(rsp => {\n              if (rsp.status == 1) {\n                this.$Message.success(\"删除成功\");\n                this.onRefresh();\n              } else {\n                this.$Message.error(rsp.message);\n              }\n            });\n          },\n          onCancel: () => {}\n        });\n      }\n    },\n    //保存\n    savePerson() {\n      debugger;\n      var form = this.$refs.userform.getForm();\n      Server.post({\n        url: services.update,\n        params: { userInfo: JSON.stringify(form) }\n      }).then(rsp => {\n        if (rsp.status === 1) {\n          this.$Message.success(\"操作成功\");\n          this.onRefresh();\n          this.dialog = false;\n        } else {\n          this.$Message.error(rsp.message);\n        }\n      });\n    },\n    //取消\n    onCancelPerson() {\n      this.dialog = false;\n    }\n  },\n  components: {\n    modalFooter,\n    SearchButtons,\n    userForm\n  }\n};\n</script>\n<style lang=\"less\" scoped>\n.userHeader {\n  height: 50px;\n  margin-top: 15px;\n}\n.search-input-default {\n  margin-right: 10px;\n}\n</style>\n\n\n "]}]}