{"remainingRequest":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\src\\views\\personalcenter\\component\\testVue\\Beijing\\beijing.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\src\\views\\personalcenter\\component\\testVue\\Beijing\\beijing.vue","mtime":1605866640678},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\less-loader\\dist\\cjs.js","mtime":1580901133496},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580901136398},{"path":"E:\\00 毕业论文\\04 系统代码\\C30 开发源代码\\前端\\jobData_Analysis前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n#map {\r\n  width: 25%;\r\n  position: absolute;\r\n  bottom: 0.5%;\r\n  right: 0.1%;\r\n  background-color: #000;\r\n}\r\n#heatMap {\r\n  width: 100%;\r\n  height: 694px;\r\n}\r\n.shaDe {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  // background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n",{"version":3,"sources":["beijing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"beijing.vue","sourceRoot":"src\\views\\personalcenter\\component\\testVue\\Beijing","sourcesContent":["<template>\r\n  <div class=\"echartDemo\">\r\n    <div class=\"wrap\">\r\n      <iframe\r\n        id=\"heatMap\"\r\n        src=\"Echarts3Layer-jsapi4x-master/index3.html\"\r\n        frameborder=\"0\"\r\n      ></iframe>\r\n      <div id=\"map\">\r\n        <div :style=\"{ height: '325px', width: '100%' }\" ref=\"myEchart\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport echarts from \"echarts\";\r\nimport \"echarts/map/js/province/beijing\";\r\nimport AreaData from \"./data\";\r\nimport EchartsOption from \"./optionConfig\";\r\nexport default {\r\n  name: \"EchartsDemo\",\r\n  props: {\r\n    areaData: {\r\n      type: Array,\r\n      default() {\r\n        return new AreaData();\r\n      },\r\n    },\r\n    option: {\r\n      type: Object,\r\n      default() {\r\n        return new EchartsOption();\r\n      },\r\n    },\r\n    colorList: {\r\n      type: Array,\r\n      default() {\r\n        return [\"#F4E001\", \"#F0805A\", \"#26C0C0\"];\r\n      },\r\n    },\r\n    cityConfig: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          name: \"北京市\",\r\n          dataJson: null,\r\n        };\r\n      },\r\n    },\r\n    areaItems: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          东城区: [116.418757, 39.937544],\r\n          西城区: [116.366794, 39.910309],\r\n          朝阳区: [116.486409, 39.991489],\r\n          丰台区: [116.286968, 39.863642],\r\n          石景山区: [116.170445, 39.974601],\r\n          海淀区: [116.280316, 40.039074],\r\n          门头沟区: [115.905381, 40.009183],\r\n          房山区: [115.701157, 39.735535],\r\n          通州区: [116.758603, 39.802486],\r\n          顺义区: [116.753525, 40.128936],\r\n          昌平区: [116.235906, 40.318085],\r\n          大兴区: [116.338033, 39.658908],\r\n          怀柔区: [116.607122, 40.524272],\r\n          平谷区: [117.112335, 40.244783],\r\n          密云区: [116.943352, 40.477362],\r\n          延庆区: [115.985006, 40.465325],\r\n        };\r\n      },\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.myChart.off(\"click\");\r\n  },\r\n  data() {\r\n    return {\r\n      wrap: null, //包裹框\r\n      drawBar: null, // 柱状图\r\n      barWrap: null,\r\n      shaDe: null, // 遮挡层\r\n      myChart: null,\r\n      // 地区坐标\r\n      selfAreaItems: {},\r\n      selfAreaData: new AreaData(),\r\n      selfOption: new EchartsOption(),\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    loadMap(mapName, data) {\r\n      if (data) {\r\n        console.log(mapName, data, \"mapName, datamapName, data\");\r\n        echarts.registerMap(mapName, data);\r\n      }\r\n    },\r\n    init() {\r\n      // console.log(mapJson, \"mapJsonmapJson\");\r\n\r\n      this.selfAreaData = JSON.parse(JSON.stringify(this.areaData));\r\n      this.selfOption = JSON.parse(JSON.stringify(this.option));\r\n      this.selfColor = JSON.parse(JSON.stringify(this.colorList));\r\n      this.selfOption = JSON.parse(JSON.stringify(this.option));\r\n      this.myChart = echarts.init(this.$refs.myEchart);\r\n      if (this.cityConfig.dataJson) {\r\n        console.log(this.cityConfig);\r\n        this.loadMap(this.cityConfig.name, this.cityConfig.dataJson);\r\n      }\r\n      this.selfAreaItems = JSON.parse(JSON.stringify(this.areaItems));\r\n      window.onresize = this.myChart.resize;\r\n\r\n      this.myChart.setOption(this.selfOption);\r\n      // 拖拽跟缩放重置\r\n      let throttledRenderEachCity = this.throttle(this.renderItems, 0);\r\n      this.myChart.on(\"geoRoam\", throttledRenderEachCity);\r\n      this.renderItems();\r\n      this.itemonClick();\r\n    },\r\n    // 缩放和拖拽\r\n    throttle(fn, delay, debounce) {\r\n      let currCall;\r\n      let lastCall = 0;\r\n      let lastExec = 0;\r\n      let timer = null;\r\n      let diff;\r\n      let scope;\r\n      let args;\r\n      delay = delay || 0;\r\n      function exec() {\r\n        lastExec = new Date().getTime();\r\n        timer = null;\r\n        fn.apply(scope, args || []);\r\n      }\r\n\r\n      let cb = function () {\r\n        currCall = new Date().getTime();\r\n        scope = this;\r\n        args = arguments;\r\n        diff = currCall - (debounce ? lastCall : lastExec) - delay;\r\n\r\n        clearTimeout(timer);\r\n\r\n        if (debounce) {\r\n          timer = setTimeout(exec, delay);\r\n        } else {\r\n          if (diff >= 0) {\r\n            exec();\r\n          } else {\r\n            timer = setTimeout(exec, -diff);\r\n          }\r\n        }\r\n\r\n        lastCall = currCall;\r\n      };\r\n\r\n      return cb;\r\n    },\r\n    // 填充 地图点位\r\n    renderItems() {\r\n      let option = Object.assign(this.selfOption, {\r\n        xAxis: [],\r\n        yAxis: [],\r\n        grid: [],\r\n        series: [],\r\n        tooltip: {\r\n          trigger: \"item\",\r\n          axisPointer: {\r\n            type: \"none\",\r\n          },\r\n        },\r\n      });\r\n      this.selfAreaData.forEach((item, idx) => {\r\n        let nodeCoord = this.selfAreaItems[item.areaName];\r\n        let coord = this.myChart.convertToPixel(\"geo\", nodeCoord);\r\n        let titleItems = item.DateItems.map((i) => i.title);\r\n        let itemData = item.DateItems.map((i) => Number(i.value));\r\n        console.log(item, this.selfAreaItems, coord);\r\n        if (coord) {\r\n          option.xAxis.push({\r\n            id: idx + item.areaName,\r\n            gridId: idx + item.areaName,\r\n            type: \"category\",\r\n            name: item.areaName,\r\n            nameLocation: \"middle\",\r\n            nameGap: 3,\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            axisLabel: {\r\n              show: false,\r\n            },\r\n            axisLine: {\r\n              onZero: false,\r\n              lineStyle: {\r\n                color: \"#666\",\r\n              },\r\n            },\r\n            data: titleItems,\r\n            z: 100,\r\n          });\r\n          option.yAxis.push({\r\n            id: idx + item.areaName,\r\n            gridId: idx + item.areaName,\r\n            type: \"value\",\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            axisLabel: {\r\n              show: false,\r\n            },\r\n            axisLine: {\r\n              show: false,\r\n              lineStyle: {\r\n                color: \"red\",\r\n              },\r\n            },\r\n            // min: 0,\r\n            // max: \"dataMax\"\r\n          });\r\n          option.grid.push({\r\n            id: idx + item.areaName,\r\n            width: 25,\r\n            height: 30,\r\n            left: coord[0] - 5,\r\n            top: coord[1] - 15,\r\n            z: 100,\r\n          });\r\n          option.series.push({\r\n            id: idx + item.areaName,\r\n            type: \"bar\",\r\n            xAxisId: idx + item.areaName,\r\n            yAxisId: idx + item.areaName,\r\n            barGap: 0,\r\n            barCategoryGap: 0,\r\n            data: itemData,\r\n            z: 100,\r\n            itemStyle: {\r\n              normal: {\r\n                color: (params) => {\r\n                  // build a color map as your need.\r\n                  let color = this.selfColor[params.dataIndex];\r\n                  return color;\r\n                },\r\n              },\r\n              opacity: 0,\r\n              emphasis: {\r\n                label: {\r\n                  show: true,\r\n                },\r\n              },\r\n            },\r\n          });\r\n        }\r\n      });\r\n      this.myChart.setOption(option);\r\n    },\r\n    // 点击显示柱状图\r\n    itemonClick() {\r\n      this.myChart.on(\"click\", (e) => {\r\n        if (e.componentSubType == \"bar\") {\r\n          this.barWrap = document.createElement(\"div\");\r\n          this.drawBar = document.createElement(\"div\");\r\n          this.wrap = document.getElementsByClassName(\"wrap\")[0];\r\n          // 先清除所有柱状图\r\n          // $(\".tongJiTu\").remove();\r\n          // 创建遮挡层\r\n          this.creatWrap();\r\n          // 创建柱状图容器\r\n          this.barWrap.id = \"bar-wrap\";\r\n          this.barWrap.className = \"bar-wrap\";\r\n          this.drawBar.className = \"zhuzhuang\";\r\n          let divX = this.getMousePos()[\"x\"];\r\n          let divY = this.getMousePos()[\"y\"];\r\n          this.barWrap.setAttribute(\r\n            \"style\",\r\n            `padding:1% 0 0 2%;width: 450px; height: 325px;position:absolute;\r\n             bottom: 25%;right: 35%;background-color:rgba(255,255,255,0.85);`\r\n          );\r\n          this.drawBar.setAttribute(\"style\", `width: 100%; height: 100%`);\r\n          // 创建柱状图\r\n          this.wrap.appendChild(this.barWrap);\r\n          this.barWrap.appendChild(this.drawBar);\r\n          this.zhuZhuangTu(e);\r\n          // // 点击遮挡层消失\r\n          this.clearWrap();\r\n        }\r\n        return;\r\n      });\r\n    },\r\n    // 获取横纵坐标\r\n    getMousePos(e) {\r\n      e = event || window.event;\r\n      let x = e.clientX;\r\n      let y = e.clientY;\r\n      return { x, y };\r\n    },\r\n    // 生成柱状图\r\n    zhuZhuangTu(e) {\r\n      let index = e.seriesIndex;\r\n      let bar = echarts.init(this.drawBar);\r\n      let xTitle = this.selfAreaData[index].DateItems.map((i) => i.title);\r\n      let yValue = this.selfAreaData[index].DateItems.map((i) => i.value);\r\n      let mytitle = this.selfAreaData[index].areaName;\r\n      let option = {\r\n        title: {\r\n          text: mytitle,\r\n          left: \"center\",\r\n        },\r\n        tooltip: {},\r\n        legend: {\r\n          data: xTitle,\r\n        },\r\n        xAxis: [\r\n          {\r\n            type: \"category\",\r\n            data: xTitle,\r\n          },\r\n        ],\r\n        yAxis: [\r\n          {\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n            type: \"value\",\r\n          },\r\n        ],\r\n        series: [\r\n          {\r\n            type: \"bar\",\r\n            itemStyle: {\r\n              normal: {\r\n                color: function (params) {\r\n                  let colorList = [\"#F75D5D\", \"#59ED4F\", \"#4C91E7\"];\r\n                  return colorList[params.dataIndex];\r\n                },\r\n                label: {\r\n                  show: true,\r\n                  position: \"top\",\r\n                  textStyle: {\r\n                    color: \"#000\",\r\n                  },\r\n                },\r\n              },\r\n            },\r\n            data: yValue,\r\n          },\r\n        ],\r\n      };\r\n      bar.setOption(option);\r\n    },\r\n    // 生成遮挡层\r\n    creatWrap() {\r\n      this.shaDe = document.createElement(\"div\");\r\n      this.shaDe.className = \"shaDe\";\r\n      this.wrap.appendChild(this.shaDe);\r\n    },\r\n    // 去掉遮挡层\r\n    clearWrap() {\r\n      this.shaDe.addEventListener(\r\n        \"click\",\r\n        () => {\r\n          this.shaDe.remove();\r\n          this.barWrap.remove();\r\n          this.drawBar.remove();\r\n          return false;\r\n        },\r\n        false\r\n      );\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n#map {\r\n  width: 25%;\r\n  position: absolute;\r\n  bottom: 0.5%;\r\n  right: 0.1%;\r\n  background-color: #000;\r\n}\r\n#heatMap {\r\n  width: 100%;\r\n  height: 694px;\r\n}\r\n.shaDe {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  // background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n</style>\r\n"]}]}