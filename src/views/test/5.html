<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>热力图</title>

		<style>
			html,
			body,
			#map {
				padding: 0;
				margin: 0;
				height: 100%;
				width: 100%;
			}

			.mytitle {
				z-index: 1000;
				color: #333;
				font-size: 18px;
				font-family: "微软雅黑";
				font-weight: 600;
				text-align: center;
				position: absolute;
				top: 10px;
				left: 35%;
				width: 30%
			}
		</style>
		<link rel="stylesheet" href="http://localhost/arcgis_js_v410_sdk/arcgis_js_api/library/4.10/esri/css/main.css">
		<script src="heatmap.js"></script>
		<script>
			var dojoConfig = {
				parseOnLoad: true,
				packages: [{
					name: "src",
					location: location.pathname.replace(/\/[^/]+$/, "") + "/src"
				}]
			};
		</script>
		<script src="http://localhost/arcgis_js_v410_sdk/arcgis_js_api/library/4.10/init.js"></script>
		<script>
			var map;

			require([
				"esri/Map",
				"esri/Basemap",
				"esri/layers/TileLayer",
				"src/HeatMapLayer",
				"esri/views/SceneView",
				"dojo/domReady!"
			], function(
				Map, Basemap, TileLayer, HeatMapLayer, SceneView
			) {
				var layer = new TileLayer({
					url: "http://map.geoq.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer"
				});
				var customBasemap = new Basemap({
					baseLayers: [layer],
					title: "Custom Basemap",
					id: "myBasemap"
				});
				var map = new Map({
					basemap: customBasemap
				});
				var view = new SceneView({
					center: [118.2358, 32.26102],
					container: 'map',
					map: map,
					zoom: 13
				});

				view.on("click", function() {
					var config = {
						container: this.box,
						radius: 30,
						maxOpacity: .7,
						minOpacity: 0,
						blur: .85,
						gradient: {
							0.25: "rgb(000,000,255)",
							0.55: "rgb(000,255,255)",
							0.65: "rgb(000,255,000)",
							0.98: "rgb(255,255,000)",
							1.00: "rgb(255,000,000)"
						}
					};
					var points = [
						["118.326907", "32.352524"],
						["118.337731", "32.312873"],
						["118.336279", "32.315111"],
						["118.332237", "32.299211"],
						["118.323419", "32.319498"],
						["118.323653", "32.314763"],
						["118.317752", "32.296954"],
						["118.315102", "32.30044"],
						["118.319312", "32.299204"],
						["118.319375", "32.295742"],
						["118.316336", "32.297959"],
						["118.318518", "32.266119"],
						["118.315304", "32.302258"],
						["118.312682", "32.262519"],
						["118.315831", "32.305556"],
						["118.321974", "32.292667"],
						["118.319971", "32.294613"],
						["118.31534", "32.29753"],
						["118.316926", "32.298995"],
						["118.316464", "32.296899"],
						["118.320777", "32.298124"],
						["118.316915", "32.295537"],
						["118.328903", "32.295932"],
						["118.358954", "32.270918"],
						["118.351622", "32.27865"],
						["118.323569", "32.305235"],
						["118.316001", "32.314185"],
						["118.315954", "32.268951"],
						["118.36066", "32.303713"],
						["118.329639", "32.280485"],
						["118.33289", "32.334554"],
						["118.332913", "32.330349"],
						["118.333201", "32.309827"],
						["118.333047", "32.310449"],
						["118.329523", "32.282896"],
						["118.350744", "32.346098"],
						["118.35271", "32.341516"],
						["118.353042", "32.30968"],
						["118.314276", "32.313749"],
						["118.309552", "32.312736"],
						["118.369584", "32.299956"],
						["118.321247", "32.308646"],
						["118.322029", "32.305769"],
						["118.319745", "32.308109"],
						["118.332464", "32.288589"],
						["118.329737", "32.285083"],
						["118.318624", "32.301991"],
						["118.319684", "32.302743"],
						["118.334631", "32.303009"],
						["118.316972", "32.291906"],
						["118.353226", "32.314828"],
						["118.361687", "32.314513"],
						["118.370015", "32.310771"],
						["118.352865", "32.311449"],
						["118.317781", "32.275561"],
						["118.327631", "32.277416"],
						["118.326953", "32.282718"],
						["118.325067", "32.281637"],
						["118.326045", "32.277999"],
						["118.372733", "32.312264"],
						["118.374366", "32.321473"],
						["118.375079", "32.32448"],
						["118.360046", "32.345845"],
						["118.3218", "32.314774"],
						["118.350518", "32.281965"],
						["118.325553", "32.312152"],
						["118.327094", "32.314406"],
						["118.313288", "32.308518"],
						["118.322961", "32.304512"],
						["118.306374", "32.312805"],
						["118.310785", "32.306231"],
						["118.312417", "32.29741"],
						["118.319414", "32.292267"],
						["118.318569", "32.294104"],
						["118.306748", "32.299932"],
						["118.37801", "32.320596"],
						["118.339228", "32.32465"],
						["118.350803", "32.263034"],
						["118.31311", "32.318918"],
						["118.327637", "32.281009"],
						["118.335425", "32.28001"],
						["118.385491", "32.298016"],
						["118.333418", "32.306329"],
						["118.341513", "32.294601"],
						["118.351298", "32.284801"],
						["118.439517", "32.206048"],
						["118.319717", "32.262655"],
						["118.321499", "32.256586"],
						["118.323972", "32.261534"],
						["118.451665", "32.178758"],
						["118.492698", "32.177306"],
						["118.492381", "32.183163"],
						["118.417003", "32.203489"],
						["118.346418", "32.301896"],
						["118.364694", "32.289496"],
						["118.427869", "32.204701"],
						["118.420888", "32.209761"],
						["118.416869", "32.207707"],
						["118.344176", "32.254"],
						["118.35329", "32.254332"],
						["118.368659", "32.262414"],
						["118.349543", "32.253895"],
						["118.335219", "32.253919"],
						["118.328058", "32.253955"],
						["118.323271", "32.289972"],
						["118.343958", "32.281761"],
						["118.3134", "32.231939"],
						["118.434841", "32.200943"],
						["118.438151", "32.181014"],
						["118.415487", "32.183985"],
						["118.332527", "32.292144"],
						["118.336972", "32.293594"],
						["118.327067", "32.291252"],
						["118.342421", "32.276276"],
						["118.325005", "32.27256"],
						["118.313208", "32.26867"],
						["118.400389", "32.314277"],
						["118.420212", "32.20199"],
						["118.334223", "32.26255"],
						["118.329228", "32.261354"],
						["118.325793", "32.261251"],
						["118.349478", "32.258057"],
						["118.351427", "32.261047"],
						["118.322037", "32.261637"],
						["118.327363", "32.257764"],
						["118.31622", "32.258681"],
						["118.317951", "32.260877"],
						["118.344985", "32.268428"],
						["118.344801", "32.257496"],
						["118.333296", "32.301407"],
						["118.344618", "32.262392"],
						["118.338162", "32.25655"],
						["118.344227", "32.265846"],
						["118.332805", "32.297689"],
						["118.344318", "32.24541"],
						["118.324598", "32.29304"],
						["118.321049", "32.247171"],
						["118.321123", "32.252164"],
						["118.346593", "32.25454"],
						["118.350564", "32.265693"],
						["118.299567", "32.34063"],
						["118.314574", "32.271308"],
						["118.332902", "32.349541"],
						["118.418253", "32.219398"],
						["118.346478", "32.263041"],
						["118.349424", "32.268351"],
						["118.347551", "32.256653"],
						["118.330606", "32.253882"],
						["118.332164", "32.24905"],
						["118.334049", "32.260012"],
						["118.330211", "32.293634"],
						["118.327256", "32.293735"],
						["118.334607", "32.269985"],
						["118.331893", "32.279543"],
						["118.326695", "32.209532"],
						["118.339847", "32.247162"],
						["118.332924", "32.276791"],
						["118.361507", "32.270052"],
						["118.344537", "32.290255"],
						["118.336695", "32.302458"],
						["118.374328", "32.261892"],
						["118.372272", "32.256716"],
						["118.293373", "32.241199"],
						["118.332797", "32.251156"],
						["118.329226", "32.248359"]
					];
					var heatmap = new HeatMapLayer(
						view,
						config,
						points
					);
					heatmap.addData();
				});
			});
		</script>
	</head>

	<body class="tundra">
		<div id="map"></div>
		<span class="mytitle">ArcGIS API for Javascript4.10扩展heatmap.js实现热力图渲染</span>
	</body>

</html>
